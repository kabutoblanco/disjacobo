(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{326:function(e,t,n){var a={"./af":148,"./af.js":148,"./ar":149,"./ar-dz":150,"./ar-dz.js":150,"./ar-kw":151,"./ar-kw.js":151,"./ar-ly":152,"./ar-ly.js":152,"./ar-ma":153,"./ar-ma.js":153,"./ar-sa":154,"./ar-sa.js":154,"./ar-tn":155,"./ar-tn.js":155,"./ar.js":149,"./az":156,"./az.js":156,"./be":157,"./be.js":157,"./bg":158,"./bg.js":158,"./bm":159,"./bm.js":159,"./bn":160,"./bn.js":160,"./bo":161,"./bo.js":161,"./br":162,"./br.js":162,"./bs":163,"./bs.js":163,"./ca":164,"./ca.js":164,"./cs":165,"./cs.js":165,"./cv":166,"./cv.js":166,"./cy":167,"./cy.js":167,"./da":168,"./da.js":168,"./de":169,"./de-at":170,"./de-at.js":170,"./de-ch":171,"./de-ch.js":171,"./de.js":169,"./dv":172,"./dv.js":172,"./el":173,"./el.js":173,"./en-au":174,"./en-au.js":174,"./en-ca":175,"./en-ca.js":175,"./en-gb":176,"./en-gb.js":176,"./en-ie":177,"./en-ie.js":177,"./en-il":178,"./en-il.js":178,"./en-in":179,"./en-in.js":179,"./en-nz":180,"./en-nz.js":180,"./en-sg":181,"./en-sg.js":181,"./eo":182,"./eo.js":182,"./es":183,"./es-do":184,"./es-do.js":184,"./es-us":185,"./es-us.js":185,"./es.js":183,"./et":186,"./et.js":186,"./eu":187,"./eu.js":187,"./fa":188,"./fa.js":188,"./fi":189,"./fi.js":189,"./fil":190,"./fil.js":190,"./fo":191,"./fo.js":191,"./fr":192,"./fr-ca":193,"./fr-ca.js":193,"./fr-ch":194,"./fr-ch.js":194,"./fr.js":192,"./fy":195,"./fy.js":195,"./ga":196,"./ga.js":196,"./gd":197,"./gd.js":197,"./gl":198,"./gl.js":198,"./gom-deva":199,"./gom-deva.js":199,"./gom-latn":200,"./gom-latn.js":200,"./gu":201,"./gu.js":201,"./he":202,"./he.js":202,"./hi":203,"./hi.js":203,"./hr":204,"./hr.js":204,"./hu":205,"./hu.js":205,"./hy-am":206,"./hy-am.js":206,"./id":207,"./id.js":207,"./is":208,"./is.js":208,"./it":209,"./it-ch":210,"./it-ch.js":210,"./it.js":209,"./ja":211,"./ja.js":211,"./jv":212,"./jv.js":212,"./ka":213,"./ka.js":213,"./kk":214,"./kk.js":214,"./km":215,"./km.js":215,"./kn":216,"./kn.js":216,"./ko":217,"./ko.js":217,"./ku":218,"./ku.js":218,"./ky":219,"./ky.js":219,"./lb":220,"./lb.js":220,"./lo":221,"./lo.js":221,"./lt":222,"./lt.js":222,"./lv":223,"./lv.js":223,"./me":224,"./me.js":224,"./mi":225,"./mi.js":225,"./mk":226,"./mk.js":226,"./ml":227,"./ml.js":227,"./mn":228,"./mn.js":228,"./mr":229,"./mr.js":229,"./ms":230,"./ms-my":231,"./ms-my.js":231,"./ms.js":230,"./mt":232,"./mt.js":232,"./my":233,"./my.js":233,"./nb":234,"./nb.js":234,"./ne":235,"./ne.js":235,"./nl":236,"./nl-be":237,"./nl-be.js":237,"./nl.js":236,"./nn":238,"./nn.js":238,"./oc-lnc":239,"./oc-lnc.js":239,"./pa-in":240,"./pa-in.js":240,"./pl":241,"./pl.js":241,"./pt":242,"./pt-br":243,"./pt-br.js":243,"./pt.js":242,"./ro":244,"./ro.js":244,"./ru":245,"./ru.js":245,"./sd":246,"./sd.js":246,"./se":247,"./se.js":247,"./si":248,"./si.js":248,"./sk":249,"./sk.js":249,"./sl":250,"./sl.js":250,"./sq":251,"./sq.js":251,"./sr":252,"./sr-cyrl":253,"./sr-cyrl.js":253,"./sr.js":252,"./ss":254,"./ss.js":254,"./sv":255,"./sv.js":255,"./sw":256,"./sw.js":256,"./ta":257,"./ta.js":257,"./te":258,"./te.js":258,"./tet":259,"./tet.js":259,"./tg":260,"./tg.js":260,"./th":261,"./th.js":261,"./tk":262,"./tk.js":262,"./tl-ph":263,"./tl-ph.js":263,"./tlh":264,"./tlh.js":264,"./tr":265,"./tr.js":265,"./tzl":266,"./tzl.js":266,"./tzm":267,"./tzm-latn":268,"./tzm-latn.js":268,"./tzm.js":267,"./ug-cn":269,"./ug-cn.js":269,"./uk":270,"./uk.js":270,"./ur":271,"./ur.js":271,"./uz":272,"./uz-latn":273,"./uz-latn.js":273,"./uz.js":272,"./vi":274,"./vi.js":274,"./x-pseudo":275,"./x-pseudo.js":275,"./yo":276,"./yo.js":276,"./zh-cn":277,"./zh-cn.js":277,"./zh-hk":278,"./zh-hk.js":278,"./zh-mo":279,"./zh-mo.js":279,"./zh-tw":280,"./zh-tw.js":280};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=326},451:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(452),l=n(440),c=n(105),u=n(106),i=n(453),s=n(401),p=n(396),f=n(441),m=n(130),d=n(450),y=n(117),h=n.n(y),b=n(449),g=n(121),v=n(19),E=n.n(v),j=n(3),w=n(28),_=function(e){return function(t){E.a.get("/api/product/".concat(e,"/category")).then((function(e){t({type:j.l,payload:e.data.products})})).catch((function(e){return console.log(e)}))}},C=function(){return function(e){e({type:j.s,payload:[]})}},O=n(18);n(64),n(327);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=H(e);if(t){var r=H(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(107);var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(v,e);var t,n,a,y=D(v);function v(){var e,t;R(this,v);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return A(t,(e=t=y.call.apply(y,[this].concat(a)),t.state={ref:"",name:"",category:{},price_cost:0,price_sale:0,amount:0},t.onAddProduct=function(){var e=t.state,n=e.ref,a=e.name,r=e.category,o=e.price_cost,l=e.price_sale,c=e.amount,u={ref:n,name:a,category:r.id,price_sale:l,price_cost:o,amount:c};t.props.addProduct(u)},t.onBreakProduct=function(e){var n=t.props.products.find((function(t){return t.metaproduct.id===e.metaproduct.id&&t.is_atomic}));e.stock-=1,n.stock+=e.presentation.amount;e.ref,e.metaproduct,e.presentation;var a=k(e,["ref","metaproduct","presentation"]),r=(n.ref,n.metaproduct,n.presentation,k(n,["ref","metaproduct","presentation"]));t.props.updateProduct(e.id,a),t.props.updateProduct(n.id,r)},t.onChange=function(e){var n=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value;t.setState(x({},n,a))},e))}return t=v,(n=[{key:"componentDidMount",value:function(){this.props.getCategories(),this.props.getProducts(1)}},{key:"componentWillUnmount",value:function(){this.props.resetProducts()}},{key:"render",value:function(){var e=this,t=this.state,n=t.ref,a=t.name,y=t.price_cost,v=t.price_sale,E=t.amount,j=this.props,w=j.products,_=j.categories,C=function(e){return e.target.select()},O=[{Header:"Ref",accessor:"ref",width:100,minWidth:50},{Header:"Nombre",accessor:"name",width:200,minWidth:50},{Header:"Stock",accessor:"stock",width:100},{Header:"Precio costo",accessor:"price_cost",Cell:function(e){return r.a.createElement(h.a,{value:e.value,displayType:"text",thousandSeparator:!0,prefix:"$"})}},{Header:"Precio venta",accessor:"price_sale",Cell:function(e){return r.a.createElement(h.a,{value:e.value,displayType:"text",thousandSeparator:!0,prefix:"$"})}},{Header:"Acciones",Cell:function(t){return r.a.createElement("div",null,r.a.createElement(o.a,{placement:"right",delay:{show:250,hide:100},overlay:r.a.createElement(l.a,null,"Romper")},r.a.createElement(c.a,{className:"ml-1 break",variant:"outline-dark",disabled:t.original.amount<2,onClick:function(){e.onBreakProduct(t.original)}})),r.a.createElement(o.a,{placement:"right",delay:{show:250,hide:100},overlay:r.a.createElement(l.a,null,"Remover")},r.a.createElement(c.a,{className:"ml-1 remove",variant:"outline-danger",disabled:!1,onClick:function(){e.remover(t.original.product)}})))}}];return r.a.createElement(u.a,null,r.a.createElement(i.a,{className:"mt-5 mb-3"},r.a.createElement(s.a,null,r.a.createElement(s.a.Header,null,r.a.createElement(i.a.Toggle,{as:s.a.Header,variant:"link",eventKey:"0"},"Registrar producto")),r.a.createElement(i.a.Collapse,{eventKey:"0"},r.a.createElement(s.a.Body,null,r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Referencia"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Ej. 0001XX",name:"ref",value:n,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{md:3,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Nombre"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Ej. limpido patojito x150ml",name:"name",value:a,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{md:3,lg:3},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Categoria"),r.a.createElement(d.a,{id:"combo-box-category",options:_,getOptionLabel:function(e){return e.name},onChange:function(t,n){e.setState({category:n})},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.name)))},renderInput:function(e){return r.a.createElement(b.a,P({},e,{label:"Combo box",name:"category",variant:"outlined"}))}})))),r.a.createElement(f.a,null,r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Precio costo"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 2000",name:"price_cost",value:y,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Precio venta"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 2000",name:"price_sale",value:v,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Monto"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 10",name:"amount",value:E,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{md:1,lg:1,className:"align-self-end"},r.a.createElement(p.a.Group,null,r.a.createElement(c.a,{className:"w-100",onClick:this.onAddProduct},"+"))))))))),r.a.createElement("span",{className:"h5"},"Lista de productos"),r.a.createElement(g.a,{className:"mt-3 mb-2",data:w,columns:O,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}))}}])&&T(t.prototype,n),a&&T(t,a),v}(a.Component),G=Object(O.b)((function(e){return{products:e.product.products,categories:e.product.categories}}),{addProduct:function(e){return function(t){t({type:j.b}),E.a.post("/api/product/add",e).then((function(e){t({type:j.d,payload:e.data.product}),t({type:j.a}),t(Object(w.a)({addSale:"Producto registrado"}))})).catch((function(e){t(Object(w.b)(e.response.data,e.response.status)),t({type:j.a})}))}},getProducts:_,resetProducts:C,getCategories:function(){return function(e){E.a.get("/api/category").then((function(t){e({type:j.i,payload:t.data.categories})})).catch((function(e){return console.log(e)}))}},updateProduct:function(e,t){return function(n){n({type:j.b}),E.a.post("/api/product/".concat(e),t).then((function(e){n({type:j.t,payload:e.data.product}),n({type:j.a}),n(Object(w.a)({addSale:"Producto actualizado"}))})).catch((function(e){n(Object(w.b)(e.response.data,e.response.status)),n({type:j.a})}))}}})(z),L=n(288),F=n.n(L),Y=(n(287),n(26));function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=J(e);if(t){var r=J(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return q(this,n)}}function q(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=n(107),X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(y,e);var t,n,a,i=W(y);function y(){var e,t;V(this,y);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return q(t,(e=t=i.call.apply(i,[this].concat(a)),t.state={date_record:new Date,date_update:new Date,provider:null,ref:"",amount:0,total:0,discount:0,is_iva:!1,is_promo:!1,details:[],product:{price_cost:0}},t.onAddDetail=function(){var e=t.state,n=e.product,a=e.amount,r=e.is_iva,o=e.is_promo,l=e.total,c={product:n.id,amount:parseInt(a),total:parseFloat(l),ref:n.ref,name:n.name,is_iva:r,is_promo:o};t.setState({details:t.state.details.concat(c)})},t.deleteRow=function(e){t.setState({details:t.state.details.filter((function(t){return t.product!==e}))})},t.onAddBuy=function(){var e=t.state.details,n=t.state,a=n.provider,r=n.ref,o=n.date_record,l=n.date_update,c=e.reduce((function(e,t){return e+t.total}),0),u=null;null!==a&&(u=a.user.id);var i={invoice:{user:u,total:c,date_record:K(o).format("YYYY-MM-DDTHH:mm"),date_update:K(l).format("YYYY-MM-DDTHH:mm")},buy:{ref:r},details:e,payments:[{ref:(new Date).toLocaleString(),payment:c}]};t.props.addBuy(i)},t.onChange=function(e){var n=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value,r=t.state.product;""===a&&(a=0),t.setState(B({},n,a),(function(){if("amount"===n){var e=a*r.price_cost;t.setState({total:e})}}))},e))}return t=y,(n=[{key:"componentDidMount",value:function(){this.props.getProviders(),this.props.getProducts(1)}},{key:"componentWillUnmount",value:function(){this.props.resetProducts()}},{key:"render",value:function(){var e=this,t=this.state,n=t.amount,a=t.total,i=t.is_iva,y=t.is_promo,v=t.details,E=t.ref,j=this.props,w=j.products,_=j.providers,C=function(e){return e.target.select()},O=v.reduce((function(e,t){return e+t.total}),0),S=[{Header:"Nombre",accessor:"name",width:400,filterable:!0},{Header:"Promo",accessor:"is_promo",Cell:function(e){return r.a.createElement("span",null,e.value?"SI":"NO")},width:60},{Header:"IVA",accessor:"is_iva",Cell:function(e){return r.a.createElement("span",null,e.value?"19%":"0%")},width:60},{Header:"Cantidad",accessor:"amount"},{Header:"Valor",accessor:"total",Cell:function(e){return r.a.createElement(h.a,{value:e.value,displayType:"text",thousandSeparator:!0,prefix:"$"})}},{Header:"Acciones",Cell:function(t){return r.a.createElement("div",null,r.a.createElement(o.a,{placement:"right",delay:{show:250,hide:100},overlay:r.a.createElement(l.a,null,"Eliminar")},r.a.createElement(c.a,{className:"ml-1 remove",variant:"outline-danger",onClick:function(){e.deleteRow(t.original.product)}})))}}];return r.a.createElement(u.a,null,r.a.createElement(s.a,{className:"mt-5 mb-3"},r.a.createElement(s.a.Header,null,r.a.createElement("span",{className:"h5"},"Compra detallada: "),r.a.createElement(h.a,{className:"h5",value:O,displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement(c.a,{className:"float-right",onClick:this.onAddBuy},"REGISTRAR")),r.a.createElement(s.a.Body,null,r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Proveedor"),r.a.createElement(d.a,{id:"combo-box-providers",disableClearable:!0,disablePortal:!0,options:_,getOptionLabel:function(e){return e.user.personal_id},onChange:function(t,n){e.setState({provider:n})},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.user.personal_id," ",e.user.username)))},renderInput:function(e){return r.a.createElement(b.a,I({},e,{label:"Combo box",name:"provider",variant:"outlined"}))}}))),r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"No. Factura"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Referencia",value:E,onChange:this.onChange,name:"ref"}))),r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Fecha"),r.a.createElement(F.a,{dateFormat:"dd/MM/yyyy",showYearDropdown:!0,yearDropdownItemNumber:15,scrollableYearDropdown:!0,selected:this.state.date_record,onChange:function(t){e.setState({date_record:t})}})))),r.a.createElement("hr",null),r.a.createElement(f.a,null,r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Producto"),r.a.createElement(d.a,{id:"combo-box-demo",options:w,getOptionLabel:function(e){return e.name},onChange:function(t,a){e.setState({product:a,total:n*a.price_cost})},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.name)))},renderInput:function(e){return r.a.createElement(b.a,I({},e,{label:"Combo box",name:"product",variant:"outlined"}))}}))),r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Cantidad"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 12",name:"amount",value:n,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Valor"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 2000",name:"total",value:a,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{md:1,lg:1},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"IVA"),r.a.createElement(p.a.Control,{type:"checkbox",name:"is_iva",checked:i,onChange:this.onChange}))),r.a.createElement(m.a,{md:1,lg:1},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Promocion"),r.a.createElement(p.a.Control,{type:"checkbox",name:"is_promo",checked:y,onChange:this.onChange}))),r.a.createElement(m.a,{md:1,lg:1,className:"align-self-end"},r.a.createElement(p.a.Group,null,r.a.createElement(c.a,{className:"w-100",onClick:this.onAddDetail},"+"))))))),r.a.createElement("span",{className:"h5"},"Detalles"),r.a.createElement(g.a,{className:"mt-3 mb-2",data:v,columns:S,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}))}}])&&$(t.prototype,n),a&&$(t,a),y}(a.Component),Q=Object(O.b)((function(e){return{products:e.product.products,providers:e.auth.providers}}),{addBuy:function(e){return function(t){t({type:j.b}),E.a.post("/api/buy/add",e).then((function(e){t({type:j.c,payload:e.data.buy}),t({type:j.a}),t(Object(w.a)({addSale:"Factura de compra registrada"}))})).catch((function(e){t(Object(w.b)(e.response.data,e.response.status)),t({type:j.a})}))}},getProducts:_,resetProducts:C,getProviders:Y.b})(X);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ce(e);if(t){var r=ce(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return le(this,n)}}function le(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue=n(107),ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(y,e);var t,n,a,i=oe(y);function y(){var e,t;ne(this,y);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return le(t,(e=t=i.call.apply(i,[this].concat(a)),t.state={date_record:new Date,date_update:new Date,client:null,ref:"",amount:0,total:0,discount:0,is_iva:!1,is_promo:!1,details:[],product:{}},t.onAddDetail=function(){var e=t.state,n=e.product,a=e.amount,r=e.is_iva,o=e.is_promo,l=e.total,c={product:n.id,amount:parseInt(a),total:parseFloat(l),ref:n.ref,name:n.name,is_iva:r,is_promo:o};t.setState({details:t.state.details.concat(c)})},t.deleteRow=function(e){t.setState({details:t.state.details.filter((function(t){return t.product!==e}))})},t.onAddSale=function(){var e=t.state.details,n=t.state,a=n.client,r=n.ref,o=n.date_record,l=n.date_update,c=e.reduce((function(e,t){return e+t.total}),0),u=null;null!==a&&(u=a.id);var i={invoice:{user:u,total:c,date_record:ue(o).format("YYYY-MM-DDTHH:mm"),date_update:ue(l).format("YYYY-MM-DDTHH:mm")},sale:{ref:r},details:e,payments:[{ref:(new Date).toLocaleString(),payment:c}]};t.props.addSale(i)},t.onChange=function(e){var n=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value,r=t.state.product;""===a&&(a=0),t.setState(te({},n,a),(function(){if("amount"===n){var e=a*r.price_sale;t.setState({total:e})}}))},e))}return t=y,(n=[{key:"componentDidMount",value:function(){this.props.getClients(),this.props.getProducts(1)}},{key:"componentWillUnmount",value:function(){this.props.resetProducts()}},{key:"render",value:function(){var e=this,t=this.state,n=t.amount,a=t.total,i=t.is_iva,y=t.is_promo,v=t.details,E=t.ref,j=this.props,w=j.products,_=j.clients,C=function(e){return e.target.select()},O=v.reduce((function(e,t){return e+t.total}),0),S=[{Header:"Nombre",accessor:"name",width:400,filterable:!0},{Header:"Promo",accessor:"is_promo",Cell:function(e){return r.a.createElement("span",null,e.value?"SI":"NO")},width:60},{Header:"IVA",accessor:"is_iva",Cell:function(e){return r.a.createElement("span",null,e.value?"19%":"0%")},width:60},{Header:"Cantidad",accessor:"amount"},{Header:"Valor",accessor:"total",Cell:function(e){return r.a.createElement(h.a,{value:e.value,displayType:"text",thousandSeparator:!0,prefix:"$"})}},{Header:"Acciones",Cell:function(t){return r.a.createElement("div",null,r.a.createElement(o.a,{placement:"right",delay:{show:250,hide:100},overlay:r.a.createElement(l.a,null,"Eliminar")},r.a.createElement(c.a,{className:"ml-1 remove",variant:"outline-danger",onClick:function(){e.deleteRow(t.original.product)}})))}}];return r.a.createElement(u.a,null,r.a.createElement(s.a,{className:"mt-5 mb-3"},r.a.createElement(s.a.Header,null,r.a.createElement("span",{className:"h5"},"Venta detallada: "),r.a.createElement(h.a,{className:"h5",value:O,displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement(c.a,{className:"float-right",onClick:this.onAddSale},"REGISTRAR")),r.a.createElement(s.a.Body,null,r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Cliente"),r.a.createElement(d.a,{id:"combo-box-demo",options:_,getOptionLabel:function(e){return e.user.personal_id},onChange:function(t,n){e.setState({client:n})},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.user.personal_id," ",e.user.username)))},renderInput:function(e){return r.a.createElement(b.a,ee({},e,{label:"Combo box",name:"client",variant:"outlined"}))}}))),r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"No. Factura"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Referencia",value:E,onChange:this.onChange,name:"ref"}))),r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Fecha"),r.a.createElement(F.a,{dateFormat:"dd/MM/yyyy",showYearDropdown:!0,yearDropdownItemNumber:15,scrollableYearDropdown:!0,selected:this.state.date_record,onChange:function(t){e.setState({date_record:t})}})))),r.a.createElement("hr",null),r.a.createElement(f.a,null,r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Producto"),r.a.createElement(d.a,{id:"combo-box-demo",options:w,getOptionLabel:function(e){return e.name},onChange:function(t,a){e.setState({product:a,total:n*a.price_sale})},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.name)))},renderInput:function(e){return r.a.createElement(b.a,ee({},e,{label:"Combo box",name:"product",variant:"outlined"}))}}))),r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Cantidad"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 12",name:"amount",value:n,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Valor"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 2000",name:"total",value:a,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{md:1,lg:1},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"IVA"),r.a.createElement(p.a.Control,{type:"checkbox",name:"is_iva",checked:i,onChange:this.onChange}))),r.a.createElement(m.a,{md:1,lg:1},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Promocion"),r.a.createElement(p.a.Control,{type:"checkbox",name:"is_promo",checked:y,onChange:this.onChange}))),r.a.createElement(m.a,{md:1,lg:1,className:"align-self-end"},r.a.createElement(p.a.Group,null,r.a.createElement(c.a,{className:"w-100",onClick:this.onAddDetail},"+"))))))),r.a.createElement("span",{className:"h5"},"Detalles"),r.a.createElement(g.a,{className:"mt-3 mb-2",data:v,columns:S,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}))}}])&&ae(t.prototype,n),a&&ae(t,a),y}(a.Component),se=Object(O.b)((function(e){return{products:e.product.products,clients:e.auth.clients}}),{addSale:function(e){return function(t){t({type:j.b}),E.a.post("/api/sale/add",e).then((function(e){t({type:j.e,payload:e.data.sale}),t({type:j.a}),t(Object(w.a)({addSale:"Factura de venta registrada"}))})).catch((function(e){t(Object(w.b)({non_field_errors:["Operacion no realizada"],status:400})),t({type:j.a})}))}},getProducts:_,resetProducts:C,getClients:Y.a})(ie),pe=n(13);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function de(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ge(e);if(t){var r=ge(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return be(this,n)}}function be(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=n(107),Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(l,e);var t,n,a,o=he(l);function l(){var e,t;me(this,l);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return be(t,(e=t=o.call.apply(o,[this].concat(a)),t.state={amount:0,payment:0,product:{}},e))}return t=l,(n=[{key:"componentDidMount",value:function(){this.props.getBuys("today")}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.buys,t=e.reduce((function(e,t){return e+t.invoice.total}),0),n=[{Header:"REF",accessor:"ref",width:100},{id:"name",Header:"Proveedor",accessor:function(e){return null!==e.invoice.user?e.invoice.user.username:"N/A"},width:150},{Header:"Fecha",accesor:"date_record",Cell:function(e){return r.a.createElement("span",null,ve(e.original.invoice.date_record).format("YYYY-MM-DD hh:mm A"))}},{Header:"Total",accessor:"total",Cell:function(e){return r.a.createElement(h.a,{value:e.original.invoice.total,displayType:"text",thousandSeparator:!0,prefix:"$"})}}];return r.a.createElement(u.a,{className:"pt-4"},r.a.createElement("div",{className:"w-100"},r.a.createElement("span",{className:"h5"},"Compras del día:","  ",r.a.createElement(h.a,{value:t,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(pe.b,{className:"float-right link-button",to:"/compras/add"},"AGREGAR")),r.a.createElement(g.a,{className:"mt-3 mb-2",data:e,columns:n,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}))}}])&&de(t.prototype,n),a&&de(t,a),l}(a.Component),je=Object(O.b)((function(e){return{buys:e.invoice.buys}}),{getBuys:function(e){return function(t){E.a.get("/api/buy/".concat(e)).then((function(e){t({type:j.h,payload:e.data.buys})})).catch((function(e){return console.log(e)}))}}})(Ee);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=xe(e);if(t){var r=xe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Pe(this,n)}}function Pe(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ke=n(107),Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(l,e);var t,n,a,o=Se(l);function l(){var e,t;_e(this,l);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return Pe(t,(e=t=o.call.apply(o,[this].concat(a)),t.state={amount:0,payment:0,product:{}},e))}return t=l,(n=[{key:"componentDidMount",value:function(){this.props.getSales("today")}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.sales,t=e.reduce((function(e,t){return e+t.invoice.total}),0),n=[{Header:"REF",accessor:"ref",width:100},{id:"name",Header:"Cliente",accessor:function(e){return null!==e.invoice.user?e.invoice.user.username:"N/A"},width:150},{Header:"Fecha",accesor:"date_record",Cell:function(e){return r.a.createElement("span",null,ke(e.original.invoice.date_record).format("YYYY-MM-DD hh:mm A"))}},{Header:"Total",accessor:"total",Cell:function(e){return r.a.createElement(h.a,{value:e.original.invoice.total,displayType:"text",thousandSeparator:!0,prefix:"$"})}}];return r.a.createElement(u.a,{className:"pt-4"},r.a.createElement("div",{className:"w-100"},r.a.createElement("span",{className:"h5"},"Ventas del día:","  ",r.a.createElement(h.a,{value:t,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(pe.b,{className:"float-right link-button",to:"/ventas/add"},"AGREGAR")),r.a.createElement(g.a,{className:"mt-3 mb-2",data:e,columns:n,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}))}}])&&Ce(t.prototype,n),a&&Ce(t,a),l}(a.Component),Te=Object(O.b)((function(e){return{sales:e.invoice.sales}}),{getSales:function(e){return function(t){E.a.get("/api/sale/".concat(e)).then((function(e){t({type:j.n,payload:e.data.sales})})).catch((function(e){return console.log(e)}))}}})(Re);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Le(e);if(t){var r=Le(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ge(this,n)}}function Ge(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(l,e);var t,n,a,o=ze(l);function l(){var e,t;De(this,l);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return Ge(t,(e=t=o.call.apply(o,[this].concat(a)),t.onChange=function(){switch(t.props.match.path){case"/ventas":return r.a.createElement(Te,null);case"/compras":return r.a.createElement(je,null);case"/inventario":return r.a.createElement(G,null);case"/ventas/add":return r.a.createElement(se,null);case"/compras/add":return r.a.createElement(Q,null);default:return r.a.createElement(r.a.Fragment,null)}},e))}return t=l,(n=[{key:"render",value:function(){return r.a.createElement("div",{style:{height:this.props.height+"px"}},r.a.createElement(this.onChange,null))}}])&&Ae(t.prototype,n),a&&Ae(t,a),l}(a.Component);t.default=Fe}}]);