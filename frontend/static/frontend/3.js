(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{375:function(e,t,n){var a={"./af":184,"./af.js":184,"./ar":185,"./ar-dz":186,"./ar-dz.js":186,"./ar-kw":187,"./ar-kw.js":187,"./ar-ly":188,"./ar-ly.js":188,"./ar-ma":189,"./ar-ma.js":189,"./ar-sa":190,"./ar-sa.js":190,"./ar-tn":191,"./ar-tn.js":191,"./ar.js":185,"./az":192,"./az.js":192,"./be":193,"./be.js":193,"./bg":194,"./bg.js":194,"./bm":195,"./bm.js":195,"./bn":196,"./bn.js":196,"./bo":197,"./bo.js":197,"./br":198,"./br.js":198,"./bs":199,"./bs.js":199,"./ca":200,"./ca.js":200,"./cs":201,"./cs.js":201,"./cv":202,"./cv.js":202,"./cy":203,"./cy.js":203,"./da":204,"./da.js":204,"./de":205,"./de-at":206,"./de-at.js":206,"./de-ch":207,"./de-ch.js":207,"./de.js":205,"./dv":208,"./dv.js":208,"./el":209,"./el.js":209,"./en-au":210,"./en-au.js":210,"./en-ca":211,"./en-ca.js":211,"./en-gb":212,"./en-gb.js":212,"./en-ie":213,"./en-ie.js":213,"./en-il":214,"./en-il.js":214,"./en-in":215,"./en-in.js":215,"./en-nz":216,"./en-nz.js":216,"./en-sg":217,"./en-sg.js":217,"./eo":218,"./eo.js":218,"./es":219,"./es-do":220,"./es-do.js":220,"./es-us":221,"./es-us.js":221,"./es.js":219,"./et":222,"./et.js":222,"./eu":223,"./eu.js":223,"./fa":224,"./fa.js":224,"./fi":225,"./fi.js":225,"./fil":226,"./fil.js":226,"./fo":227,"./fo.js":227,"./fr":228,"./fr-ca":229,"./fr-ca.js":229,"./fr-ch":230,"./fr-ch.js":230,"./fr.js":228,"./fy":231,"./fy.js":231,"./ga":232,"./ga.js":232,"./gd":233,"./gd.js":233,"./gl":234,"./gl.js":234,"./gom-deva":235,"./gom-deva.js":235,"./gom-latn":236,"./gom-latn.js":236,"./gu":237,"./gu.js":237,"./he":238,"./he.js":238,"./hi":239,"./hi.js":239,"./hr":240,"./hr.js":240,"./hu":241,"./hu.js":241,"./hy-am":242,"./hy-am.js":242,"./id":243,"./id.js":243,"./is":244,"./is.js":244,"./it":245,"./it-ch":246,"./it-ch.js":246,"./it.js":245,"./ja":247,"./ja.js":247,"./jv":248,"./jv.js":248,"./ka":249,"./ka.js":249,"./kk":250,"./kk.js":250,"./km":251,"./km.js":251,"./kn":252,"./kn.js":252,"./ko":253,"./ko.js":253,"./ku":254,"./ku.js":254,"./ky":255,"./ky.js":255,"./lb":256,"./lb.js":256,"./lo":257,"./lo.js":257,"./lt":258,"./lt.js":258,"./lv":259,"./lv.js":259,"./me":260,"./me.js":260,"./mi":261,"./mi.js":261,"./mk":262,"./mk.js":262,"./ml":263,"./ml.js":263,"./mn":264,"./mn.js":264,"./mr":265,"./mr.js":265,"./ms":266,"./ms-my":267,"./ms-my.js":267,"./ms.js":266,"./mt":268,"./mt.js":268,"./my":269,"./my.js":269,"./nb":270,"./nb.js":270,"./ne":271,"./ne.js":271,"./nl":272,"./nl-be":273,"./nl-be.js":273,"./nl.js":272,"./nn":274,"./nn.js":274,"./oc-lnc":275,"./oc-lnc.js":275,"./pa-in":276,"./pa-in.js":276,"./pl":277,"./pl.js":277,"./pt":278,"./pt-br":279,"./pt-br.js":279,"./pt.js":278,"./ro":280,"./ro.js":280,"./ru":281,"./ru.js":281,"./sd":282,"./sd.js":282,"./se":283,"./se.js":283,"./si":284,"./si.js":284,"./sk":285,"./sk.js":285,"./sl":286,"./sl.js":286,"./sq":287,"./sq.js":287,"./sr":288,"./sr-cyrl":289,"./sr-cyrl.js":289,"./sr.js":288,"./ss":290,"./ss.js":290,"./sv":291,"./sv.js":291,"./sw":292,"./sw.js":292,"./ta":293,"./ta.js":293,"./te":294,"./te.js":294,"./tet":295,"./tet.js":295,"./tg":296,"./tg.js":296,"./th":297,"./th.js":297,"./tk":298,"./tk.js":298,"./tl-ph":299,"./tl-ph.js":299,"./tlh":300,"./tlh.js":300,"./tr":301,"./tr.js":301,"./tzl":302,"./tzl.js":302,"./tzm":303,"./tzm-latn":304,"./tzm-latn.js":304,"./tzm.js":303,"./ug-cn":305,"./ug-cn.js":305,"./uk":306,"./uk.js":306,"./ur":307,"./ur.js":307,"./uz":308,"./uz-latn":309,"./uz-latn.js":309,"./uz.js":308,"./vi":310,"./vi.js":310,"./x-pseudo":311,"./x-pseudo.js":311,"./yo":312,"./yo.js":312,"./zh-cn":313,"./zh-cn.js":313,"./zh-hk":314,"./zh-hk.js":314,"./zh-mo":315,"./zh-mo.js":315,"./zh-tw":316,"./zh-tw.js":316};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=375},592:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(593),l=n(579),c=n(110),u=n(111),i=n(594),s=n(543),p=n(536),f=n(580),m=n(149),d=n(591),y=n(125),h=n.n(y),b=n(589),v=n(133),g=n(590),E=n(150),j=n(19),w=n.n(j),_=n(3),C=n(30),O=function(e){return function(t){t({type:_.b});var n=new FormData;n.append("csv_file",e[0],e[0].name),n.append("title","file"),n.append("content","csv"),w.a.post("/api/product/upload",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t({type:_.x,payload:e.data.products}),t({type:_.a}),t(Object(C.a)({addSale:"Productos registrado"}))})).catch((function(e){t(Object(C.b)(e.response.data,e.response.status)),t({type:_.a})}))}},S=function(e){return function(t){w.a.get("/api/product/".concat(e,"/category")).then((function(e){t({type:_.n,payload:e.data.products})})).catch((function(e){return console.log(e)}))}},P=function(){return function(e){e({type:_.u,payload:[]})}},x=function(e){return function(t){w.a.get("/api/product/".concat(e,"/detail")).then((function(e){t({type:_.l,payload:e.data.detail})})).catch((function(e){return console.log(e)}))}},k=n(18);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=L(e);if(t){var r=L(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(l,e);var t,n,a,o=F(l);function l(){var e,t;R(this,l);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return A(t,(e=t=o.call.apply(o,[this].concat(a)),t.state={cvs_file:{}},t.onChange=function(e){var n=e.target,a="file"===n.type?n.files:n.value,r=n.name;t.setState(T({},r,a))},t.onUpload=function(){console.log(t.state.cvs_file),t.props.uploadProducts(t.state.cvs_file)},e))}return t=l,(n=[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(g.a,{show:this.props.show,onHide:this.props.onClose},r.a.createElement(g.a.Header,{closeButton:!0},r.a.createElement(g.a.Title,null,"Cargar reporte productos")),r.a.createElement(g.a.Body,null,r.a.createElement(p.a,null,r.a.createElement(E.a,{name:"cvs_file",type:"file",onChange:this.onChange}))),r.a.createElement(g.a.Footer,null,r.a.createElement(c.a,{variant:"secondary",onClick:this.props.onClose},"Cancelar"),r.a.createElement(c.a,{variant:"primary",name:"eliminar",onClick:this.onUpload},"Subir")))}}])&&N(t.prototype,n),a&&N(t,a),l}(a.Component),G=(Object(k.b)((function(e){return{products:e.product.products}}),{uploadProducts:O,getProducts:S})(Y),n(595));function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=V(e);if(t){var r=V(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return $(this,n)}}function $(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(l,e);var t,n,a,o=U(l);function l(){return M(this,l),o.apply(this,arguments)}return t=l,(n=[{key:"componentDidMount",value:function(){this.props.getDetail(this.props.id)}},{key:"render",value:function(){var e=this.props,t=e.product,n=e.detail;return r.a.createElement(g.a,{show:this.props.show,onHide:this.props.onClose},r.a.createElement(g.a.Header,{closeButton:!0},r.a.createElement(g.a.Title,null,null!==t?t.name:"")),r.a.createElement(g.a.Body,null,r.a.createElement(G.a,null,r.a.createElement(G.a.Item,null,"Stock: ",null!==t?t.stock:0),function(){var e=null!==n?n.total:0;return 0===e?r.a.createElement(G.a.Item,{variant:"danger"},"Tasa de venta: ","ninguno vendido"):e>0&&e<=2?r.a.createElement(G.a.Item,{variant:"warning"},"Tasa de venta: ","poca rotación"):e>2&&e<=5?r.a.createElement(G.a.Item,{variant:"info"},"Tasa de venta: ","rotación normal"):e>5&&e<=7?void G.a.Item:r.a.createElement(G.a.Item,{variant:"success"},"Tasa de venta: ","es una locura de ventas")}(),r.a.createElement(G.a.Item,null,"Costo:"," ",r.a.createElement(h.a,{value:null!==t?t.price_cost:0,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(G.a.Item,null,"Precio:"," ",r.a.createElement(h.a,{value:null!==t?t.price_sale:0,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(G.a.Item,null,"Utilidad:"," ",(100*(null!==t?t.price_cost>0?t.price_sale/t.price_cost-1:1:0)).toFixed(0),"%"))),r.a.createElement(g.a.Footer,null,r.a.createElement(c.a,{variant:"secondary",onClick:this.props.onClose},"Cerrar")))}}])&&I(t.prototype,n),a&&I(t,a),l}(a.Component);Object(k.b)((function(e){return{detail:e.product.detail}}),{getDetail:x})(W),n(69),n(376);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ae(e);if(t){var r=ae(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ne(this,n)}}function ne(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(112);var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(g,e);var t,n,a,y=te(g);function g(){var e,t;Z(this,g);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return ne(t,(e=t=y.call.apply(y,[this].concat(a)),t.state={ref:"",name:"",category:{},price_cost:0,price_sale:0,amount:0,product:null,show:!1,showDetail:!1},t.onOpen=function(){t.setState({show:!0})},t.onOpenDetail=function(e){t.props.getDetail(e.id),t.setState({product:e,showDetail:!0})},t.onClose=function(){t.setState({show:!1,showDetail:!1})},t.onAddProduct=function(){var e=t.state,n=e.ref,a=e.name,r=e.category,o=e.price_cost,l=e.price_sale,c=e.amount,u={ref:n,name:a,category:r.id,price_sale:l,price_cost:o,amount:c,filter:0};t.props.addProduct(u)},t.onBreakProduct=function(e){var n=t.props.products.find((function(t){return t.ref===e.ref&&1===t.amount}));e.stock-=1,n.stock+=e.amount;e.ref;var a=X(e,["ref"]),r=(n.ref,X(n,["ref"]));t.props.updateProduct(e.id,a),t.props.updateProduct(n.id,r)},t.onChange=function(e){var n=e.target.name;console.log(e.target.value);var a="checkbox"===e.target.type?e.target.checked:e.target.value;t.setState(K({},n,a),(function(){"filter"===n&&t.props.getProducts(a)}))},e))}return t=g,(n=[{key:"componentDidMount",value:function(){this.props.getCategories(),this.props.getProducts(0)}},{key:"componentWillUnmount",value:function(){this.props.resetProducts()}},{key:"render",value:function(){var e=this,t=this.state,n=t.ref,a=t.name,y=t.price_cost,g=t.price_sale,E=t.amount,j=t.show,w=t.showDetail,_=this.props,C=_.products,O=_.categories,S=O.map((function(e){return r.a.createElement("option",{value:e.id},e.name)})),P=function(e){return e.target.select()},x=[{Header:"Ref",accessor:"ref",Cell:function(t){return r.a.createElement("span",{style:{textDecoration:"underline blue",color:"blue"},onClick:function(){e.onOpenDetail(t.original)}},t.original.ref,t.original.id)},width:70},{Header:"Nombre",accessor:"name",filterable:!0,width:200},{Header:"Precio costo",accessor:"price_cost",Cell:function(e){return r.a.createElement(h.a,{value:e.value,displayType:"text",thousandSeparator:!0,prefix:"$"})},width:100},{Header:"Precio venta",accessor:"price_sale",Cell:function(e){return r.a.createElement(h.a,{value:e.value,displayType:"text",thousandSeparator:!0,prefix:"$"})},width:100},{id:"util",Header:"Utilidad",accessor:function(e){return e.price_cost>0?e.price_sale/e.price_cost-1:1},Cell:function(e){return r.a.createElement("span",null,(100*e.value).toFixed(0),"%")},width:80},{Header:"Stock",accessor:"stock",width:50},{Header:"Acciones",Cell:function(t){return r.a.createElement("div",null,r.a.createElement(o.a,{placement:"right",delay:{show:250,hide:100},overlay:r.a.createElement(l.a,null,"Romper")},r.a.createElement(c.a,{className:"ml-1 break",variant:"outline-dark",disabled:t.original.amount<2,onClick:function(){e.onBreakProduct(t.original)}})),r.a.createElement(o.a,{placement:"right",delay:{show:250,hide:100},overlay:r.a.createElement(l.a,null,"Remover")},r.a.createElement(c.a,{className:"ml-1 remove",variant:"outline-danger",disabled:!1,onClick:function(){e.remover(t.original.product)}})))}}];return r.a.createElement(u.a,null,r.a.createElement(i.a,{className:"mt-5 mb-3"},r.a.createElement(s.a,null,r.a.createElement(s.a.Header,null,r.a.createElement(i.a.Toggle,{as:s.a.Header,variant:"link",eventKey:"0"},"Registrar producto")),r.a.createElement(i.a.Collapse,{eventKey:"0"},r.a.createElement(s.a.Body,null,r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Referencia"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Ej. 0001XX",name:"ref",value:n,onFocus:P,onChange:this.onChange}))),r.a.createElement(m.a,{md:3,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Nombre"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Ej. limpido patojito x150ml",name:"name",value:a,onFocus:P,onChange:this.onChange}))),r.a.createElement(m.a,{md:3,lg:3},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Categoria"),r.a.createElement(d.a,{id:"combo-box-category",options:O,getOptionLabel:function(e){return e.name},onChange:function(t,n){e.setState({category:n})},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.name)))},renderInput:function(e){return r.a.createElement(b.a,J({},e,{label:"Combo box",name:"category",variant:"outlined"}))}})))),r.a.createElement(f.a,null,r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Precio costo"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 2000",name:"price_cost",value:y,onFocus:P,onChange:this.onChange}))),r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Precio venta"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 2000",name:"price_sale",value:g,onFocus:P,onChange:this.onChange}))),r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Monto"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 10",name:"amount",value:E,onFocus:P,onChange:this.onChange}))),r.a.createElement(m.a,{md:1,lg:1,className:"align-self-end"},r.a.createElement(p.a.Group,null,r.a.createElement(c.a,{className:"w-100",onClick:this.onAddProduct},"+"))))))))),r.a.createElement("div",{className:"d-block"},r.a.createElement("span",{className:"h5"},"Lista de productos")),r.a.createElement("div",{className:"d-inline-flex"},r.a.createElement(p.a.Control,{as:"select",defaultValue:0,name:"filter",value:this.state.filter,onChange:this.onChange},r.a.createElement("option",{value:0},"---categoria---"),S),r.a.createElement("button",{className:"ml-1",onClick:this.onOpen},"Upload")),r.a.createElement(v.a,{className:"mt-3 mb-2",data:C,columns:x,defaultPageSize:5,defaultFilterMethod:function(e,t,n){var a=e.pivotId||e.id;return void 0===t[a]||String(t[a]).toLowerCase().replace(/ /g,"").includes(e.value.toLowerCase().replace(/ /g,""))},previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}),r.a.createElement(Y,{show:j,onClose:this.onClose,uploadProducts:this.props.uploadProducts}),r.a.createElement(W,{show:w,onClose:this.onClose,getDetail:this.props.getDetail,product:this.state.product,detail:this.props.detail}))}}])&&Q(t.prototype,n),a&&Q(t,a),g}(a.Component),oe=Object(k.b)((function(e){return{products:e.product.products,categories:e.product.categories,detail:e.product.detail}}),{addProduct:function(e){return function(t){t({type:_.b}),w.a.post("/api/product/add",e).then((function(e){t({type:_.d,payload:e.data.product}),t({type:_.a}),t(Object(C.a)({addSale:"Producto registrado"}))})).catch((function(e){t(Object(C.b)(e.response.data,e.response.status)),t({type:_.a})}))}},getProducts:S,resetProducts:P,getCategories:function(){return function(e){w.a.get("/api/category").then((function(t){e({type:_.i,payload:t.data.categories})})).catch((function(e){return console.log(e)}))}},updateProduct:function(e,t){return function(n){n({type:_.b}),w.a.post("/api/product/".concat(e),t).then((function(e){n({type:_.w,payload:e.data.product}),n({type:_.a}),n(Object(C.a)({addSale:"Producto actualizado"}))})).catch((function(e){n(Object(C.b)(e.response.data,e.response.status)),n({type:_.a})}))}},uploadProducts:O,getDetail:x})(re),le=n(322),ce=n.n(le),ue=(n(321),function(e){return function(t){w.a.get("/api/sale/".concat(e)).then((function(e){console.log(e.data),t({type:_.p,payload:e.data.sales})})).catch((function(e){return console.log(e)}))}}),ie=function(){return function(e){e({type:_.v,payload:[]})}},se=n(27);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(){return(fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ge(e);if(t){var r=ge(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ve(this,n)}}function ve(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ee=n(112),je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(y,e);var t,n,a,i=be(y);function y(){var e,t;de(this,y);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return ve(t,(e=t=i.call.apply(i,[this].concat(a)),t.state={date_record:new Date,date_update:new Date,provider:null,ref:"",amount:0,total:0,discount:0,is_iva:!1,is_promo:!1,details:[],product:{price_cost:0}},t.onAddDetail=function(){var e=t.state,n=e.product,a=e.amount,r=e.is_iva,o=e.is_promo,l=e.total,c={product:n.id,amount:parseInt(a),total:parseFloat(l),ref:n.ref,name:n.name,is_iva:r,is_promo:o};t.setState({details:t.state.details.concat(c)})},t.deleteRow=function(e){t.setState({details:t.state.details.filter((function(t){return t.product!==e}))})},t.onAddBuy=function(){var e=t.state.details,n=t.state,a=n.provider,r=n.ref,o=n.date_record,l=n.date_update,c=e.reduce((function(e,t){return e+t.total}),0),u=null;null!==a&&(u=a.user.id);var i={invoice:{user:u,total:c,date_record:Ee(o).format("YYYY-MM-DDTHH:mm"),date_update:Ee(l).format("YYYY-MM-DDTHH:mm")},buy:{ref:r},details:e,payments:[{ref:(new Date).toLocaleString(),total:c}]};t.props.addBuy(i)},t.onChange=function(e){var n=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value,r=t.state.product;""===a&&(a=0),t.setState(me({},n,a),(function(){if("amount"===n){var e=a*r.price_cost;t.setState({total:e})}}))},e))}return t=y,(n=[{key:"componentDidMount",value:function(){this.props.getProviders(),this.props.getProducts(0)}},{key:"componentWillUnmount",value:function(){this.props.resetProducts()}},{key:"render",value:function(){var e=this,t=this.state,n=t.amount,a=t.total,i=t.is_iva,y=t.is_promo,g=t.details,E=t.ref,j=this.props,w=j.products,_=j.providers,C=function(e){return e.target.select()},O=g.reduce((function(e,t){return e+t.total}),0),S=[{Header:"Nombre",accessor:"name",width:400,filterable:!0},{Header:"Promo",accessor:"is_promo",Cell:function(e){return r.a.createElement("span",null,e.value?"SI":"NO")},width:60},{Header:"IVA",accessor:"is_iva",Cell:function(e){return r.a.createElement("span",null,e.value?"19%":"0%")},width:60},{Header:"Cantidad",accessor:"amount"},{Header:"Valor",accessor:"total",Cell:function(e){return r.a.createElement(h.a,{value:e.value,displayType:"text",thousandSeparator:!0,prefix:"$"})}},{Header:"Acciones",Cell:function(t){return r.a.createElement("div",null,r.a.createElement(o.a,{placement:"right",delay:{show:250,hide:100},overlay:r.a.createElement(l.a,null,"Eliminar")},r.a.createElement(c.a,{className:"ml-1 remove",variant:"outline-danger",onClick:function(){e.deleteRow(t.original.product)}})))}}];return r.a.createElement(u.a,null,r.a.createElement(s.a,{className:"mt-5 mb-3"},r.a.createElement(s.a.Header,null,r.a.createElement("span",{className:"h5"},"Compra detallada: "),r.a.createElement(h.a,{className:"h5",value:O,displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement(c.a,{className:"float-right",onClick:this.onAddBuy},"REGISTRAR")),r.a.createElement(s.a.Body,null,r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Proveedor"),r.a.createElement(d.a,{id:"combo-box-providers",disableClearable:!0,disablePortal:!0,options:_,getOptionLabel:function(e){return e.user.personal_id},onChange:function(t,n){e.setState({provider:n})},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.user.personal_id," ",e.user.username)))},renderInput:function(e){return r.a.createElement(b.a,fe({},e,{label:"Combo box",name:"provider",variant:"outlined"}))}}))),r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"No. Factura"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Referencia",value:E,onChange:this.onChange,name:"ref"}))),r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Fecha"),r.a.createElement(ce.a,{dateFormat:"dd/MM/yyyy",showYearDropdown:!0,yearDropdownItemNumber:15,scrollableYearDropdown:!0,selected:this.state.date_record,onChange:function(t){e.setState({date_record:t})}})))),r.a.createElement("hr",null),r.a.createElement(f.a,null,r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Producto"),r.a.createElement(d.a,{id:"combo-box-demo",options:w,getOptionLabel:function(e){return e.name},onChange:function(t,a){e.setState({product:a,total:n*a.price_cost})},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.name)))},renderInput:function(e){return r.a.createElement(b.a,fe({},e,{label:"Combo box",name:"product",variant:"outlined"}))}}))),r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Cantidad"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 12",name:"amount",value:n,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Valor"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 2000",name:"total",value:a,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{md:1,lg:1},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"IVA"),r.a.createElement(p.a.Control,{type:"checkbox",name:"is_iva",checked:i,onChange:this.onChange}))),r.a.createElement(m.a,{md:1,lg:1},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Promocion"),r.a.createElement(p.a.Control,{type:"checkbox",name:"is_promo",checked:y,onChange:this.onChange}))),r.a.createElement(m.a,{md:1,lg:1,className:"align-self-end"},r.a.createElement(p.a.Group,null,r.a.createElement(c.a,{className:"w-100",onClick:this.onAddDetail},"+"))))))),r.a.createElement("span",{className:"h5"},"Detalles"),r.a.createElement(v.a,{className:"mt-3 mb-2",data:g,columns:S,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}))}}])&&ye(t.prototype,n),a&&ye(t,a),y}(a.Component),we=Object(k.b)((function(e){return{products:e.product.products,providers:e.auth.providers}}),{addBuy:function(e){return function(t){t({type:_.b}),w.a.post("/api/buy/add",e).then((function(e){t({type:_.c,payload:e.data.buy}),t({type:_.a}),t(Object(C.a)({addSale:"Factura de compra registrada"}))})).catch((function(e){t(Object(C.b)(e.response.data,e.response.status)),t({type:_.a})}))}},getProducts:S,resetProducts:P,getProviders:se.b,uploadProducts:O})(je);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Te(e);if(t){var r=Te(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return De(this,n)}}function De(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=n(112),Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(y,e);var t,n,a,i=ke(y);function y(){var e,t;Se(this,y);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return De(t,(e=t=i.call.apply(i,[this].concat(a)),t.state={date_record:new Date,date_update:new Date,client:null,ref:Re(new Date).format("FVYYMMDDHHmmss"),amount:0,total:0,discount:0,is_iva:!1,is_promo:!1,details:[],product:{}},t.onAddDetail=function(){var e=t.state,n=e.product,a=e.amount,r=e.is_iva,o=e.is_promo,l=e.total,c={product:n.id,amount:parseInt(a),total:parseFloat(l),ref:n.ref,name:n.name,util:r?0:parseFloat(l)-n.price_cost*parseFloat(a),is_sale:!0,is_consumption:r,is_promo:o};t.setState({details:t.state.details.concat(c)})},t.deleteRow=function(e){t.setState({details:t.state.details.filter((function(t){return t.product!==e}))})},t.onAddSale=function(){var e=t.state.details,n=t.state,a=n.client,r=n.ref,o=n.date_record,l=n.date_update,c=e.reduce((function(e,t){return e+t.total}),0),u=e.reduce((function(e,t){return e+t.util}),0),i=null;null!==a&&(i=a.user.id);var s={user:i,total:c,date_record:Re(o).format("YYYY-MM-DDTHH:mm"),date_update:Re(l).format("YYYY-MM-DDTHH:mm")},p=[{ref:(new Date).toLocaleString(),total:c}],f={invoice:s,sale:{ref:r,util:parseFloat(u)},details:e,payments:p};t.props.addSale(f)},t.onChange=function(e){var n=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value,r=t.state.product;""===a&&(a=0),t.setState(Oe({},n,a),(function(){if("amount"===n){var e=a*r.price_sale;t.setState({total:e})}}))},e))}return t=y,(n=[{key:"componentDidMount",value:function(){this.props.getClients(),this.props.getProducts(0)}},{key:"componentWillUnmount",value:function(){this.props.resetProducts()}},{key:"render",value:function(){var e=this,t=this.state,n=t.amount,a=t.total,i=t.is_iva,y=t.is_promo,g=t.details,E=t.ref,j=this.props,w=j.products,_=j.clients,C=function(e){return e.target.select()},O=g.reduce((function(e,t){return e+t.total}),0),S=[{Header:"Nombre",accessor:"name",width:400,filterable:!0},{Header:"Promo",accessor:"is_promo",Cell:function(e){return r.a.createElement("span",null,e.value?"SI":"NO")},width:60},{Header:"IVA",accessor:"is_iva",Cell:function(e){return r.a.createElement("span",null,e.value?"19%":"0%")},width:60},{Header:"Cantidad",accessor:"amount"},{Header:"Valor",accessor:"total",Cell:function(e){return r.a.createElement(h.a,{value:e.value,displayType:"text",thousandSeparator:!0,prefix:"$"})}},{Header:"Acciones",Cell:function(t){return r.a.createElement("div",null,r.a.createElement(o.a,{placement:"right",delay:{show:250,hide:100},overlay:r.a.createElement(l.a,null,"Eliminar")},r.a.createElement(c.a,{className:"ml-1 remove",variant:"outline-danger",onClick:function(){e.deleteRow(t.original.product)}})))}}];return r.a.createElement(u.a,null,r.a.createElement(s.a,{className:"mt-5 mb-3"},r.a.createElement(s.a.Header,null,r.a.createElement("span",{className:"h5"},"Venta detallada: "),r.a.createElement(h.a,{className:"h5",value:O,displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement(c.a,{className:"float-right",onClick:this.onAddSale},"REGISTRAR")),r.a.createElement(s.a.Body,null,r.a.createElement(p.a,null,r.a.createElement(f.a,null,r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Cliente"),r.a.createElement(d.a,{id:"combo-box-demo",options:_,getOptionLabel:function(e){return e.user.personal_id},onChange:function(t,n){console.log(n),e.setState({client:n})},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.user.personal_id," ",e.user.username)))},renderInput:function(e){return r.a.createElement(b.a,Ce({},e,{label:"Combo box",name:"client",variant:"outlined"}))}}))),r.a.createElement(m.a,{xs:6,md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"No. Factura"),r.a.createElement(p.a.Control,{type:"text",placeholder:"Referencia",value:E,onChange:this.onChange,name:"ref"}))),r.a.createElement(m.a,{xs:6,md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Fecha"),r.a.createElement(ce.a,{dateFormat:"dd/MM/yyyy",showYearDropdown:!0,yearDropdownItemNumber:15,scrollableYearDropdown:!0,selected:this.state.date_record,onChange:function(t){e.setState({date_record:t})}})))),r.a.createElement("hr",null),r.a.createElement(f.a,null,r.a.createElement(m.a,{md:4,lg:4},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Producto"),r.a.createElement(d.a,{id:"combo-box-demo",options:w,getOptionLabel:function(e){return e.name},onChange:function(t,a){e.setState({product:a,total:n*a.price_sale})},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.name)))},renderInput:function(e){return r.a.createElement(b.a,Ce({},e,{label:"Combo box",name:"product",variant:"outlined"}))}}))),r.a.createElement(m.a,{xs:5,md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Cantidad"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 12",name:"amount",value:n,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{xs:7,md:2,lg:2},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Valor"),r.a.createElement(p.a.Control,{type:"number",placeholder:"Ej. 2000",name:"total",value:a,onFocus:C,onChange:this.onChange}))),r.a.createElement(m.a,{xs:6,md:1,lg:1},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"¿Gasto?"),r.a.createElement(p.a.Control,{type:"checkbox",name:"is_iva",checked:i,onChange:this.onChange}))),r.a.createElement(m.a,{xs:6,md:1,lg:1},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"¿Promo?"),r.a.createElement(p.a.Control,{type:"checkbox",name:"is_promo",checked:y,onChange:this.onChange}))),r.a.createElement(m.a,{md:1,lg:1,className:"align-self-end"},r.a.createElement(p.a.Group,null,r.a.createElement(c.a,{className:"w-100",onClick:this.onAddDetail},"+"))))))),r.a.createElement("span",{className:"h5"},"Detalles"),r.a.createElement(v.a,{className:"mt-3 mb-2",data:g,columns:S,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}))}}])&&Pe(t.prototype,n),a&&Pe(t,a),y}(a.Component),He=Object(k.b)((function(e){return{products:e.product.products,clients:e.auth.clients}}),{addSale:function(e){return function(t){t({type:_.b}),w.a.post("/api/sale/add",e).then((function(e){t({type:_.e,payload:e.data.sale}),t({type:_.a}),t(Object(C.a)({addSale:"Factura de venta registrada"}))})).catch((function(e){t(Object(C.b)({non_field_errors:["Operacion no realizada"],status:400})),t({type:_.a})}))}},getProducts:S,resetProducts:P,getClients:se.a})(Ne),Fe=n(13);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ie(e);if(t){var r=Ie(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Me(this,n)}}function Me(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Be=n(112),Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(l,e);var t,n,a,o=ze(l);function l(){var e,t;Le(this,l);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return Me(t,(e=t=o.call.apply(o,[this].concat(a)),t.state={amount:0,payment:0,product:{}},e))}return t=l,(n=[{key:"componentDidMount",value:function(){this.props.getBuys("today")}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.buys,t=e.reduce((function(e,t){return e+t.invoice.total}),0),n=[{Header:"REF",accessor:"ref",width:100},{id:"name",Header:"Proveedor",accessor:function(e){return null!==e.invoice.user?e.invoice.user.username:"N/A"},width:150},{Header:"Fecha",accesor:"date_record",Cell:function(e){return r.a.createElement("span",null,Be(e.original.invoice.date_record).format("YYYY-MM-DD hh:mm A"))}},{Header:"Total",accessor:"total",Cell:function(e){return r.a.createElement(h.a,{value:e.original.invoice.total,displayType:"text",thousandSeparator:!0,prefix:"$"})}}];return r.a.createElement(u.a,{className:"pt-4"},r.a.createElement("div",{className:"w-100"},r.a.createElement("span",{className:"h5"},"Compras del día:","  ",r.a.createElement(h.a,{value:t,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(Fe.b,{className:"float-right link-button",to:"/compras/add"},"AGREGAR")),r.a.createElement(v.a,{className:"mt-3 mb-2",data:e,columns:n,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}))}}])&&Ye(t.prototype,n),a&&Ye(t,a),l}(a.Component),$e=Object(k.b)((function(e){return{buys:e.invoice.buys}}),{getBuys:function(e){return function(t){w.a.get("/api/buy/".concat(e)).then((function(e){t({type:_.h,payload:e.data.buys})})).catch((function(e){return console.log(e)}))}}})(Ue),Ve=n(587);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Qe(e);if(t){var r=Qe(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ze(this,n)}}function Ze(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var et=n(112),tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(l,e);var t,n,a,o=Xe(l);function l(){return qe(this,l),o.apply(this,arguments)}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.sale,n=e.details;console.log(n);var a=n.map((function(e){return console.log(e),r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.product.name),r.a.createElement("td",null,e.amount),r.a.createElement("td",null,r.a.createElement(h.a,{value:e.total,displayType:"text",thousandSeparator:!0,prefix:"$"})))}));return r.a.createElement(g.a,{show:this.props.show,onHide:this.props.onClose},r.a.createElement(g.a.Header,{closeButton:!0},r.a.createElement(g.a.Title,null,null!==t?t.ref:"")),r.a.createElement(g.a.Body,null,r.a.createElement("div",null,r.a.createElement("span",null,null!==t&&null!==t.invoice.user?t.invoice.user.username:"N/A")," ",r.a.createElement("span",null,null!==t?et(t.invoice.date_record).format("YYYY-MM-DD hh:mm A"):""),r.a.createElement("br",null),r.a.createElement("span",null,"Total venta: "),r.a.createElement(h.a,{value:null!==t?t.invoice.total:0,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(Ve.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,style:{maxHeight:300}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Producto"),r.a.createElement("th",null,"Cantidad"),r.a.createElement("th",null,"Total"))),r.a.createElement("tbody",null,a))),r.a.createElement(g.a.Footer,null,r.a.createElement(c.a,{variant:"secondary",onClick:this.props.onClose},"Cerrar")))}}])&&Je(t.prototype,n),a&&Je(t,a),l}(a.Component),nt=Object(k.b)((function(e){return{details:e.invoice.details}}),{})(tt);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=it(e);if(t){var r=it(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ut(this,n)}}function ut(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var st=n(112),pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(l,e);var t,n,a,o=ct(l);function l(){var e,t;rt(this,l);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return ut(t,(e=t=o.call.apply(o,[this].concat(a)),t.state={amount:0,payment:0,product:{},sale:null,show:!1},t.onOpenDetail=function(e){t.props.getDetails(e.invoice.id),t.setState({sale:e,show:!0})},t.onClose=function(){t.setState({show:!1})},e))}return t=l,(n=[{key:"componentDidMount",value:function(){this.props.getSales("today")}},{key:"componentWillUnmount",value:function(){this.props.resetSales()}},{key:"render",value:function(){var e=this,t=this.props.sales,n=this.state,a=n.sale,o=n.show,l=t.reduce((function(e,t){return e+t.invoice.total}),0),c=[{Header:"REF",accessor:"ref",Cell:function(t){return r.a.createElement("span",{style:{textDecoration:"underline blue",color:"blue"},onClick:function(){e.onOpenDetail(t.original)}},t.original.ref,t.original.id)},width:100},{id:"name",Header:"Cliente",accessor:function(e){return null!==e.invoice.user?e.invoice.user.username:"N/A"},width:150},{Header:"Fecha",accesor:"date_record",Cell:function(e){return r.a.createElement("span",null,st(e.original.invoice.date_record).format("YYYY-MM-DD hh:mm A"))}},{Header:"Total",accessor:"total",Cell:function(e){return r.a.createElement(h.a,{value:e.original.invoice.total,displayType:"text",thousandSeparator:!0,prefix:"$"})}}];return r.a.createElement(u.a,{className:"pt-4"},r.a.createElement("div",{className:"w-100"},r.a.createElement("span",{className:"h5"},"Ventas del día:","  ",r.a.createElement(h.a,{value:l,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(Fe.b,{className:"float-right link-button",to:"/ventas/add"},"AGREGAR")),r.a.createElement(v.a,{className:"mt-3 mb-2",data:t,columns:c,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}),r.a.createElement(nt,{show:o,sale:a,onClose:this.onClose}))}}])&&ot(t.prototype,n),a&&ot(t,a),l}(a.Component),ft=Object(k.b)((function(e){return{sales:e.invoice.sales,details:e.invoice.details}}),{getSales:ue,resetSales:ie,getDetails:function(e){return function(t){w.a.get("/api/detail/".concat(e,"/invoice")).then((function(e){t({type:_.k,payload:e.data.details})})).catch((function(e){return console.log(e)}))}}})(pt),mt=n(442);function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=jt(e);if(t){var r=jt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Et(this,n)}}function Et(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wt=n(112),_t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(l,e);var t,n,a,o=gt(l);function l(){var e,t;ht(this,l);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return Et(t,(e=t=o.call.apply(o,[this].concat(a)),t.state={filter:0},t.onChange=function(e){var n=e.target,a=n.name,r=n.value;t.setState(yt({},a,r),(function(){if(console.log(a+" "+r),"filter"===a)switch(parseInt(r)){case 0:case 1:console.log("ultima semana"),t.props.getSales("last_week");break;case 2:console.log("ultimo mes"),t.props.getSales("last_month")}}))},e))}return t=l,(n=[{key:"componentDidMount",value:function(){this.props.getSales("last_week")}},{key:"componentWillUnmount",value:function(){this.props.resetSales()}},{key:"render",value:function(){var e={labels:this.props.sales.map((function(e){return wt(e.date).locale("es").format("ddd DD")+"-"+(e.util/e.total*100).toFixed(0)+"%"})),datasets:[{label:"Ventas",data:this.props.sales.map((function(e){return e.total})),backgroundColor:"rgba(144, 223, 144, 0.5)",lineTension:.15},{label:"Ganancia",data:this.props.sales.map((function(e){return e.util})),backgroundColor:"rgba(255, 99, 71, 0.5)",lineTension:.15}]},t=this.props.sales.reduce((function(e,t){return e+t.total}),0),n=this.props.sales.reduce((function(e,t){return e+t.util}),0);return r.a.createElement(u.a,{className:"pt-2"},r.a.createElement(f.a,null,r.a.createElement(m.a,null,r.a.createElement("span",null,"Total:",r.a.createElement(h.a,{value:t.toFixed(0),displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement("br",null),r.a.createElement("span",null,"Utilidad:",r.a.createElement(h.a,{value:n.toFixed(0),displayType:"text",thousandSeparator:!0,prefix:"$"}))),r.a.createElement(m.a,null,r.a.createElement(p.a.Control,{as:"select",defaultValue:0,name:"filter",value:this.state.filter,onChange:this.onChange},r.a.createElement("option",{value:1},"Ultimos 7 días"),r.a.createElement("option",{value:2},"Ultimos 30 días")))),r.a.createElement(mt.Line,{data:e,options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}))}}])&&bt(t.prototype,n),a&&bt(t,a),l}(a.Component),Ct=Object(k.b)((function(e){return{sales:e.invoice.sales}}),{getSales:ue,resetSales:ie})(_t);function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Tt(e);if(t){var r=Tt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Dt(this,n)}}function Dt(e,t){return!t||"object"!==Ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(l,e);var t,n,a,o=kt(l);function l(){var e,t;St(this,l);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return Dt(t,(e=t=o.call.apply(o,[this].concat(a)),t.onChange=function(){switch(t.props.match.path){case"/":case"/home":return t.props.resetSales(),r.a.createElement(Ct,null);case"/ventas":return t.props.resetSales(),r.a.createElement(ft,null);case"/compras":return r.a.createElement($e,null);case"/inventario":return r.a.createElement(oe,null);case"/ventas/add":return r.a.createElement(He,null);case"/compras/add":return r.a.createElement(we,null);default:return r.a.createElement(r.a.Fragment,null)}},e))}return t=l,(n=[{key:"render",value:function(){return r.a.createElement("div",{style:{height:this.props.height+"px"}},r.a.createElement(this.onChange,null))}}])&&Pt(t.prototype,n),a&&Pt(t,a),l}(a.Component);t.default=Object(k.b)((function(e){return{}}),{resetSales:ie})(Rt)}}]);