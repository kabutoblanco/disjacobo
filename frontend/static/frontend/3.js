(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{382:function(e,t,a){var n={"./af":190,"./af.js":190,"./ar":191,"./ar-dz":192,"./ar-dz.js":192,"./ar-kw":193,"./ar-kw.js":193,"./ar-ly":194,"./ar-ly.js":194,"./ar-ma":195,"./ar-ma.js":195,"./ar-sa":196,"./ar-sa.js":196,"./ar-tn":197,"./ar-tn.js":197,"./ar.js":191,"./az":198,"./az.js":198,"./be":199,"./be.js":199,"./bg":200,"./bg.js":200,"./bm":201,"./bm.js":201,"./bn":202,"./bn.js":202,"./bo":203,"./bo.js":203,"./br":204,"./br.js":204,"./bs":205,"./bs.js":205,"./ca":206,"./ca.js":206,"./cs":207,"./cs.js":207,"./cv":208,"./cv.js":208,"./cy":209,"./cy.js":209,"./da":210,"./da.js":210,"./de":211,"./de-at":212,"./de-at.js":212,"./de-ch":213,"./de-ch.js":213,"./de.js":211,"./dv":214,"./dv.js":214,"./el":215,"./el.js":215,"./en-au":216,"./en-au.js":216,"./en-ca":217,"./en-ca.js":217,"./en-gb":218,"./en-gb.js":218,"./en-ie":219,"./en-ie.js":219,"./en-il":220,"./en-il.js":220,"./en-in":221,"./en-in.js":221,"./en-nz":222,"./en-nz.js":222,"./en-sg":223,"./en-sg.js":223,"./eo":224,"./eo.js":224,"./es":225,"./es-do":226,"./es-do.js":226,"./es-us":227,"./es-us.js":227,"./es.js":225,"./et":228,"./et.js":228,"./eu":229,"./eu.js":229,"./fa":230,"./fa.js":230,"./fi":231,"./fi.js":231,"./fil":232,"./fil.js":232,"./fo":233,"./fo.js":233,"./fr":234,"./fr-ca":235,"./fr-ca.js":235,"./fr-ch":236,"./fr-ch.js":236,"./fr.js":234,"./fy":237,"./fy.js":237,"./ga":238,"./ga.js":238,"./gd":239,"./gd.js":239,"./gl":240,"./gl.js":240,"./gom-deva":241,"./gom-deva.js":241,"./gom-latn":242,"./gom-latn.js":242,"./gu":243,"./gu.js":243,"./he":244,"./he.js":244,"./hi":245,"./hi.js":245,"./hr":246,"./hr.js":246,"./hu":247,"./hu.js":247,"./hy-am":248,"./hy-am.js":248,"./id":249,"./id.js":249,"./is":250,"./is.js":250,"./it":251,"./it-ch":252,"./it-ch.js":252,"./it.js":251,"./ja":253,"./ja.js":253,"./jv":254,"./jv.js":254,"./ka":255,"./ka.js":255,"./kk":256,"./kk.js":256,"./km":257,"./km.js":257,"./kn":258,"./kn.js":258,"./ko":259,"./ko.js":259,"./ku":260,"./ku.js":260,"./ky":261,"./ky.js":261,"./lb":262,"./lb.js":262,"./lo":263,"./lo.js":263,"./lt":264,"./lt.js":264,"./lv":265,"./lv.js":265,"./me":266,"./me.js":266,"./mi":267,"./mi.js":267,"./mk":268,"./mk.js":268,"./ml":269,"./ml.js":269,"./mn":270,"./mn.js":270,"./mr":271,"./mr.js":271,"./ms":272,"./ms-my":273,"./ms-my.js":273,"./ms.js":272,"./mt":274,"./mt.js":274,"./my":275,"./my.js":275,"./nb":276,"./nb.js":276,"./ne":277,"./ne.js":277,"./nl":278,"./nl-be":279,"./nl-be.js":279,"./nl.js":278,"./nn":280,"./nn.js":280,"./oc-lnc":281,"./oc-lnc.js":281,"./pa-in":282,"./pa-in.js":282,"./pl":283,"./pl.js":283,"./pt":284,"./pt-br":285,"./pt-br.js":285,"./pt.js":284,"./ro":286,"./ro.js":286,"./ru":287,"./ru.js":287,"./sd":288,"./sd.js":288,"./se":289,"./se.js":289,"./si":290,"./si.js":290,"./sk":291,"./sk.js":291,"./sl":292,"./sl.js":292,"./sq":293,"./sq.js":293,"./sr":294,"./sr-cyrl":295,"./sr-cyrl.js":295,"./sr.js":294,"./ss":296,"./ss.js":296,"./sv":297,"./sv.js":297,"./sw":298,"./sw.js":298,"./ta":299,"./ta.js":299,"./te":300,"./te.js":300,"./tet":301,"./tet.js":301,"./tg":302,"./tg.js":302,"./th":303,"./th.js":303,"./tk":304,"./tk.js":304,"./tl-ph":305,"./tl-ph.js":305,"./tlh":306,"./tlh.js":306,"./tr":307,"./tr.js":307,"./tzl":308,"./tzl.js":308,"./tzm":309,"./tzm-latn":310,"./tzm-latn.js":310,"./tzm.js":309,"./ug-cn":311,"./ug-cn.js":311,"./uk":312,"./uk.js":312,"./ur":313,"./ur.js":313,"./uz":314,"./uz-latn":315,"./uz-latn.js":315,"./uz.js":314,"./vi":316,"./vi.js":316,"./x-pseudo":317,"./x-pseudo.js":317,"./yo":318,"./yo.js":318,"./zh-cn":319,"./zh-cn.js":319,"./zh-hk":320,"./zh-hk.js":320,"./zh-mo":321,"./zh-mo.js":321,"./zh-tw":322,"./zh-tw.js":322};function r(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=l,e.exports=r,r.id=382},592:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(593),o=a(579),c=a(110),u=a(111),i=a(594),s=a(541),m=a(536),d=a(580),p=a(151),f=a(591),b=a(123),y=a.n(b),v=a(589),E=a(133),g=a(590),h=a(152),j=a(19),O=a.n(j),w=a(3),S=a(30),C=function(e){return function(t){t({type:w.b});var a=new FormData;a.append("csv_file",e[0],e[0].name),a.append("title","file"),a.append("content","csv"),O.a.post("/api/product/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t({type:w.y,payload:e.data.products}),t({type:w.a}),t(Object(S.a)({addSale:"Productos registrado"}))})).catch((function(e){t(Object(S.b)(e.response.data,e.response.status)),t({type:w.a})}))}},x=function(e){return function(t){O.a.get("/api/product/".concat(e,"/category")).then((function(e){t({type:w.n,payload:e.data.products})})).catch((function(e){return console.log(e)}))}},k=function(){return function(e){e({type:w.v,payload:[]})}},_=a(18);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var T=Object(_.b)((function(e){return{products:e.product.products}}),{uploadProducts:C,getProducts:x})((function(e){var t=P(Object(n.useState)({}),2),a=t[0],l=t[1];return r.a.createElement(g.a,{show:e.show,onHide:e.onClose},r.a.createElement(g.a.Header,{closeButton:!0},r.a.createElement(g.a.Title,null,"Cargar reporte productos")),r.a.createElement(g.a.Body,null,r.a.createElement(m.a,null,r.a.createElement(h.a,{name:"cvs_file",type:"file",onChange:function(e){var t=e.target,a=t.value,n=t.files,r=t.type;l(a="file"===r?n:a)}}))),r.a.createElement(g.a.Footer,null,r.a.createElement(c.a,{variant:"secondary",onClick:e.onClose},"Cancelar"),r.a.createElement(c.a,{variant:"primary",name:"eliminar",onClick:function(){console.log(a),e.uploadProducts(a)}},"Subir")))})),A=a(595);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){H(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var M=function(e){var t=Y(Object(n.useState)({id:-1,price_cost:0,price_sale:0,stock:0}),2),a=t[0],l=t[1];Object(n.useEffect)((function(){var t=e.product;null!==t&&l(I(I({},a),{},{price_sale:t.price_sale,price_cost:t.price_cost,stock:t.stock}))}),[e.product]);var o=e.product,u=e.detail;return r.a.createElement(g.a,{show:e.show,onHide:e.onClose},r.a.createElement(g.a.Header,{closeButton:!0},r.a.createElement(g.a.Title,null,null!==e.product?e.product.name:"")),r.a.createElement(g.a.Body,null,r.a.createElement(A.a,null,r.a.createElement(A.a.Item,null,r.a.createElement(m.a.Label,null,"Stock"),r.a.createElement(m.a.Control,{type:"number",name:"stock",value:a.stock,onChange:function(e){var t=e.target,n=t.name,r=t.value;l(I(I({},a),{},H({},n,r)))}})),function(){console.log("hasta aqui si");var e=null!==u?u.total:0;return 0===e?r.a.createElement(A.a.Item,{variant:"danger"},r.a.createElement("p",null," ","Tasa de venta: ",e," ","ninguno vendido")):e>0&&e<=2?r.a.createElement(A.a.Item,{variant:"warning"},r.a.createElement("p",null," ","Tasa de venta: ",e," ","poca rotación")):e>2&&e<=5?r.a.createElement(A.a.Item,{variant:"info"},r.a.createElement("p",null," ","Tasa de venta: ",e," ","rotación normal")):e>5&&e<=7?r.a.createElement(A.a.Item,{variant:"primary"},r.a.createElement("p",null," ","Tasa de venta: ",e," ","alto rotación")):r.a.createElement(A.a.Item,{variant:"success"},r.a.createElement("p",null," ","Tasa de venta: ",e," ","es una locura de ventas"))}(),r.a.createElement(A.a.Item,null,"Costo:"," ",r.a.createElement(y.a,{value:a.price_cost,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(A.a.Item,null,"Precio:"," ",r.a.createElement(y.a,{value:a.price_sale,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(A.a.Item,null,"Utilidad:"," ",(100*(null!==o?a.price_cost>0?a.price_sale/a.price_cost-1:1:0)).toFixed(0),"%"))),r.a.createElement(g.a.Footer,null,r.a.createElement(c.a,{variant:"secondary",onClick:e.onClose},"Cerrar"),r.a.createElement(c.a,{variant:"primary",onClick:function(){var t=e.product.id,n={price_sale:a.price_sale,price_cost:a.price_cost,stock:a.stock};e.updateProduct(t,n)}},"Actualizar")))};a(69),a(375);function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){$(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function $(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function R(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var V=Object(_.b)((function(e){return{products:e.product.products,categories:e.product.categories,detail:e.product.detail}}),{addProduct:function(e){return function(t){t({type:w.b}),O.a.post("/api/product/add",e).then((function(e){t({type:w.d,payload:e.data.product}),t({type:w.a}),t(Object(S.a)({addSale:"Producto registrado"}))})).catch((function(e){t(Object(S.b)(e.response.data,e.response.status)),t({type:w.a})}))}},getProducts:x,resetProducts:k,getCategories:function(){return function(e){O.a.get("/api/category").then((function(t){e({type:w.i,payload:t.data.categories})})).catch((function(e){return console.log(e)}))}},updateProduct:function(e,t){return function(a){a({type:w.b}),O.a.post("/api/product/".concat(e),t).then((function(e){a({type:w.x,payload:e.data.product}),a({type:w.a}),a(Object(S.a)({addSale:"Producto actualizado"}))})).catch((function(e){a(Object(S.b)(e.response.data,e.response.status)),a({type:w.a})}))}},uploadProducts:C,getDetail:function(e){return function(t){O.a.get("/api/product/".concat(e,"/detail")).then((function(e){t({type:w.l,payload:e.data.detail})})).catch((function(e){return console.log(e)}))}}})((function(e){var t=U(Object(n.useState)({ref:"",name:"",price_cost:0,price_sale:0,amount:0}),2),a=t[0],b=t[1],g=U(Object(n.useState)({}),2),h=g[0],j=g[1],O=U(Object(n.useState)(0),2),w=O[0],S=O[1],C=U(Object(n.useState)(null),2),x=C[0],k=C[1],_=U(Object(n.useState)(!1),2),P=_[0],D=_[1],A=U(Object(n.useState)(!1),2),N=A[0],I=A[1],H=U(Object(n.useState)(0),2),Y=H[0],F=H[1],z=function(t){console.log("open"),e.getDetail(t.id),k(t),I(!0)};Object(n.useEffect)((function(){e.getProducts(w)}),[w]),Object(n.useEffect)((function(){return e.getCategories(),e.getProducts(0),function(){e.resetProducts()}}),[]);var B=function(){D(!1),I(!1)},V=function(t){var a=e.products.find((function(e){return e.ref===t.ref&&1===e.amount}));t.stock-=1,a.stock+=t.amount;t.ref;var n=R(t,["ref"]),r=(a.ref,R(a,["ref"]));e.updateProduct(t.id,n),e.updateProduct(a.id,r)},q=function(e){var t=e.target,n=t.type,r=t.name,l=t.checked,o="checkbox"===n?l:e.target.value;b(G(G({},a),{},$({},r,o)))},J=e.products,K=e.categories,X=K.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),W=function(e){return e.target.select()},Z=[{Header:"Ref",accessor:"ref",Cell:function(e){return r.a.createElement("span",{style:{textDecoration:"underline blue",color:"blue"},onClick:function(){console.log("detalles"),z(e.original)}},e.original.ref,e.original.id)},width:70},{Header:"Nombre",accessor:"name",filterable:!0,width:200},{Header:"Precio costo",accessor:"price_cost",Cell:function(e){return r.a.createElement(y.a,{value:e.value,displayType:"text",thousandSeparator:!0,prefix:"$"})},width:100},{Header:"Precio venta",accessor:"price_sale",Cell:function(e){return r.a.createElement(y.a,{value:e.value,displayType:"text",thousandSeparator:!0,prefix:"$"})},width:100},{id:"util",Header:"Utilidad",accessor:function(e){return e.price_cost>0?e.price_sale/e.price_cost-1:1},Cell:function(e){return r.a.createElement("span",null,(100*e.value).toFixed(0),"%")},width:80},{Header:"Stock",accessor:"stock",width:50},{Header:"Acciones",Cell:function(e){return r.a.createElement("div",null,r.a.createElement(l.a,{placement:"right",delay:{show:250,hide:100},overlay:r.a.createElement(o.a,null,"Romper")},r.a.createElement(c.a,{className:"ml-1 break",variant:"outline-dark",disabled:e.original.amount<2||e.original.amount>1&&e.original.stock<1,onClick:function(){V(e.original)}})),r.a.createElement(l.a,{placement:"right",delay:{show:250,hide:100},overlay:r.a.createElement(o.a,null,"Remover")},r.a.createElement(c.a,{className:"ml-1 remove",variant:"outline-danger",disabled:!1,onClick:function(){remover(e.original.product)}})))}}];return Object(n.useEffect)((function(){var e=J.reduce((function(e,t){return e+(t.stock>0?t.price_cost*t.stock:0)}),0);F(e)}),[J]),r.a.createElement(u.a,null,r.a.createElement(i.a,{className:"mt-5 mb-3"},r.a.createElement(s.a,null,r.a.createElement(s.a.Header,null,r.a.createElement(i.a.Toggle,{as:s.a.Header,variant:"link",eventKey:"0"},"Registrar producto")),r.a.createElement(i.a.Collapse,{eventKey:"0"},r.a.createElement(s.a.Body,null,r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(p.a,{md:2,lg:2},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Referencia"),r.a.createElement(m.a.Control,{type:"text",placeholder:"Ej. 0001XX",name:"ref",value:a.ref,onFocus:W,onChange:q}))),r.a.createElement(p.a,{md:3,lg:4},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Nombre"),r.a.createElement(m.a.Control,{type:"text",placeholder:"Ej. limpido patojito x150ml",name:"name",value:a.name,onFocus:W,onChange:q}))),r.a.createElement(p.a,{md:3,lg:3},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Categoria"),r.a.createElement(f.a,{id:"combo-box-category",options:K,getOptionLabel:function(e){return e.name},onChange:function(e,t){j(t)},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.name)))},renderInput:function(e){return r.a.createElement(v.a,L({},e,{label:"Combo box",name:"category",variant:"outlined"}))}})))),r.a.createElement(d.a,null,r.a.createElement(p.a,{md:2,lg:2},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Precio costo"),r.a.createElement(m.a.Control,{type:"number",placeholder:"Ej. 2000",name:"price_cost",value:a.price_cost,onFocus:W,onChange:q}))),r.a.createElement(p.a,{md:2,lg:2},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Precio venta"),r.a.createElement(m.a.Control,{type:"number",placeholder:"Ej. 2000",name:"price_sale",value:a.price_sale,onFocus:W,onChange:q}))),r.a.createElement(p.a,{md:2,lg:2},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Monto"),r.a.createElement(m.a.Control,{type:"number",placeholder:"Ej. 10",name:"amount",value:a.amount,onFocus:W,onChange:q}))),r.a.createElement(p.a,{md:1,lg:1,className:"align-self-end"},r.a.createElement(m.a.Group,null,r.a.createElement(c.a,{className:"w-100",onClick:function(){var t={ref:a.ref,name:a.name,category:h.id,price_sale:a.price_sale,price_cost:a.price_cost,amount:a.amount};e.addProduct(t)}},"+"))))))))),r.a.createElement("div",{className:"d-block"},r.a.createElement("span",{className:"h5"},"Lista de productos")),r.a.createElement("div",{className:"d-inline-flex"},r.a.createElement(m.a.Control,{as:"select",name:"filter",value:w,onChange:function(e){S(e.target.value)}},r.a.createElement("option",{key:0,value:0},"---categoria---"),X),r.a.createElement("button",{className:"ml-1",onClick:function(){D(!0)}},"Upload")),r.a.createElement("div",{className:"mt-1"},r.a.createElement("span",null,"Total costo: "),r.a.createElement(y.a,{value:Y,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(E.a,{className:"mt-3 mb-2",data:J,columns:Z,defaultPageSize:5,defaultFilterMethod:function(e,t,a){var n=e.pivotId||e.id;return void 0===t[n]||String(t[n]).toLowerCase().replace(/ /g,"").includes(e.value.toLowerCase().replace(/ /g,""))},previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}),r.a.createElement(T,{show:P,onClose:B,uploadProducts:e.uploadProducts}),r.a.createElement(M,{show:N,onClose:B,getDetail:e.getDetail,product:x,updateProduct:e.updateProduct,detail:e.detail}))})),q=function(e){return function(t){O.a.get("/api/sale/".concat(e)).then((function(e){console.log(e.data),t({type:w.p,payload:e.data.sales})})).catch((function(e){return console.log(e)}))}},J=function(){return function(e){e({type:w.w,payload:[]})}},K=function(e){return function(t){O.a.get("/api/detail/".concat(e,"/invoice")).then((function(e){t({type:w.k,payload:e.data.details})})).catch((function(e){return console.log(e)}))}},X=a(27),W=(a(138),a(139)),Z=a.n(W);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(a),!0).forEach((function(t){ae(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var le=a(112);var oe=Object(_.b)((function(e){return{products:e.product.products,providers:e.auth.providers}}),{addBuy:function(e){return function(t){t({type:w.b}),O.a.post("/api/buy/add",e).then((function(e){t({type:w.c,payload:e.data.buy}),t({type:w.a}),t(Object(S.a)({addSale:"Factura de compra registrada"}))})).catch((function(e){t(Object(S.b)(e.response.data,e.response.status)),t({type:w.a})}))}},getProducts:x,resetProducts:k,getProviders:X.b,uploadProducts:C})((function(e){var t=ne(Object(n.useState)({date_record:new Date,date_update:new Date,provider:null,ref:"",amount:1,total:0,discount:0,is_iva:0,is_promo:0}),2),a=t[0],i=t[1],b=ne(Object(n.useState)([]),2),g=b[0],h=b[1],j=ne(Object(n.useState)({price_cost:0}),2),O=j[0],w=j[1];Object(n.useEffect)((function(){return e.getProviders(),e.getProducts(0),function(){e.resetProducts()}}),[]);var S=function(e){var t=e.target.type,n=e.target.name,r="checkbox"===t?e.target.checked:e.target.value;i(te(te({},a),{},ae({},n,r)))},C=e.products,x=e.providers,k=function(e){return e.target.select()},_=g.reduce((function(e,t){return e+t.total}),0),P=[{Header:"Nombre",accessor:"name",width:400,filterable:!0},{Header:"Promo",accessor:"is_promo",Cell:function(e){return r.a.createElement("span",null,e.value?"SI":"NO")},width:60},{Header:"IVA",accessor:"is_iva",Cell:function(e){return r.a.createElement("span",null,e.value?"19%":"0%")},width:60},{Header:"Cantidad",accessor:"amount"},{Header:"Valor",accessor:"total",Cell:function(e){return r.a.createElement(y.a,{value:e.value,displayType:"text",thousandSeparator:!0,prefix:"$"})}},{Header:"Acciones",Cell:function(e){return r.a.createElement("div",null,r.a.createElement(l.a,{placement:"right",delay:{show:250,hide:100},overlay:r.a.createElement(o.a,null,"Eliminar")},r.a.createElement(c.a,{className:"ml-1 remove",variant:"outline-danger",onClick:function(){!function(e){h(g.filter((function(t){return t.product!==e})))}(e.original.product)}})))}}];return r.a.createElement(u.a,null,r.a.createElement(s.a,{className:"mt-5 mb-3"},r.a.createElement(s.a.Header,null,r.a.createElement("span",{className:"h5"},"Compra detallada: "),r.a.createElement(y.a,{className:"h5",value:_,displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement(c.a,{className:"float-right",onClick:function(){var t=a.provider,n=a.ref,r=a.date_record,l=a.date_update,o=g.reduce((function(e,t){return e+t.total}),0),c=null;null!==t&&(c=t.user.id);var u={user:c,total:o,date_record:le(r).format("YYYY-MM-DDTHH:mm"),date_update:le(l).format("YYYY-MM-DDTHH:mm")},i=[{ref:(new Date).toLocaleString(),total:o}],s={invoice:u,buy:{ref:n},details:g,payments:i};e.addBuy(s)}},"REGISTRAR")),r.a.createElement(s.a.Body,null,r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(p.a,{md:4,lg:4},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Proveedor"),r.a.createElement(f.a,{id:"combo-box-providers",disableClearable:!0,disablePortal:!0,options:x,getOptionLabel:function(e){return e.user.personal_id},onChange:function(e,t){i(te(te({},a),{},{provider:t}))},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.user.personal_id," ",e.user.username)))},renderInput:function(e){return r.a.createElement(v.a,Q({},e,{label:"Combo box",name:"provider",variant:"outlined"}))}}))),r.a.createElement(p.a,{md:4,lg:4},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"No. Factura"),r.a.createElement(m.a.Control,{type:"text",placeholder:"Referencia",value:a.ref,onChange:S,name:"ref"}))),r.a.createElement(p.a,{md:4,lg:4},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Fecha"),r.a.createElement(Z.a,{dateFormat:"dd/MM/yyyy",showYearDropdown:!0,yearDropdownItemNumber:15,scrollableYearDropdown:!0,selected:a.date_record,onChange:function(e){i(te(te({},a),{},{date_record:e}))}})))),r.a.createElement("hr",null),r.a.createElement(d.a,null,r.a.createElement(p.a,{md:4,lg:4},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Producto"),r.a.createElement(f.a,{id:"combo-box-demo",options:C,getOptionLabel:function(e){return e.name},onChange:function(e,t){w(t),i(te(te({},a),{},{total:a.amount*t.price_cost}))},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.name)))},renderInput:function(e){return r.a.createElement(v.a,Q({},e,{label:"Combo box",name:"product",variant:"outlined"}))}}))),r.a.createElement(p.a,{md:2,lg:2},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Cantidad"),r.a.createElement(m.a.Control,{type:"number",placeholder:"Ej. 12",name:"amount",value:a.amount,onFocus:k,onChange:function(e){var t=e.target.value;t&&i(te(te({},a),{},{amount:t,total:t*O.price_cost}))}}))),r.a.createElement(p.a,{md:2,lg:2},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Valor"),r.a.createElement(m.a.Control,{type:"number",placeholder:"Ej. 2000",name:"total",value:a.total,onFocus:k,onChange:S}))),r.a.createElement(p.a,{md:1,lg:1},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"IVA"),r.a.createElement(m.a.Control,{type:"checkbox",name:"is_iva",checked:a.is_iva,onChange:S}))),r.a.createElement(p.a,{md:1,lg:1},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Promocion"),r.a.createElement(m.a.Control,{type:"checkbox",name:"is_promo",checked:a.is_promo,onChange:S}))),r.a.createElement(p.a,{md:1,lg:1,className:"align-self-end"},r.a.createElement(m.a.Group,null,r.a.createElement(c.a,{className:"w-100",onClick:function(){var e=a.amount,t=a.is_iva,n=a.is_promo,r=a.total,l={product:O.id,amount:parseFloat(e),total:parseFloat(r),ref:O.ref,name:O.name,is_iva:t,is_promo:n};h(g.concat(l))}},"+"))))))),r.a.createElement("span",{className:"h5"},"Detalles"),r.a.createElement(E.a,{className:"mt-3 mb-2",data:g,columns:P,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}))}));function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ue(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach((function(t){se(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var pe=a(112);var fe=Object(_.b)((function(e){return{products:e.product.products,clients:e.auth.clients}}),{addSale:function(e){return function(t){t({type:w.b}),O.a.post("/api/sale/add",e).then((function(e){t({type:w.e,payload:e.data.sale}),t({type:w.a}),t(Object(S.a)({addSale:"Factura de venta registrada"}))})).catch((function(e){t(Object(S.b)({non_field_errors:["Operacion no realizada"],status:400})),t({type:w.a})}))}},getProducts:x,resetProducts:k,getClients:X.a})((function(e){var t=me(Object(n.useState)({date_record:new Date,date_update:new Date,ref:pe(new Date).format("FVYYMMDDHHmmss"),amount:1,total:0,discount:0,is_iva:!1,is_discount:!1}),2),a=t[0],i=t[1],b=me(Object(n.useState)(null),2),g=b[0],h=b[1],j=me(Object(n.useState)([]),2),O=j[0],w=j[1],S=me(Object(n.useState)({price_sale:0}),2),C=S[0],x=S[1];Object(n.useEffect)((function(){return e.getClients(),e.getProducts(0),function(){e.resetProducts()}}),[]);var k=function(e){var t=e.target,n=t.name,r=t.checked,l=t.value;l="checkbox"===t.type?r:l,i(ie(ie({},a),{},se({},n,l)))},_=e.products,P=e.clients,D=function(e){return e.target.select()},T=O.reduce((function(e,t){return e+t.total}),0),A=[{Header:"Nombre",accessor:"name",width:400,filterable:!0},{Header:"Promo",accessor:"is_promo",Cell:function(e){return r.a.createElement("span",null,e.value?"SI":"NO")},width:60},{Header:"IVA",accessor:"is_iva",Cell:function(e){return r.a.createElement("span",null,e.value?"19%":"0%")},width:60},{Header:"Cantidad",accessor:"amount"},{Header:"Valor",accessor:"total",Cell:function(e){return r.a.createElement(y.a,{value:e.value,displayType:"text",thousandSeparator:!0,prefix:"$"})}},{Header:"Acciones",Cell:function(e){return r.a.createElement("div",null,r.a.createElement(l.a,{placement:"right",delay:{show:250,hide:100},overlay:r.a.createElement(o.a,null,"Eliminar")},r.a.createElement(c.a,{className:"ml-1 remove",variant:"outline-danger",onClick:function(){!function(e){w(O.filter((function(t){return t.product!==e})))}(e.original.product)}})))}}];return r.a.createElement(u.a,null,r.a.createElement(s.a,{className:"mt-5 mb-3"},r.a.createElement(s.a.Header,null,r.a.createElement("span",{className:"h5"},"Venta detallada: "),r.a.createElement(y.a,{className:"h5",value:T,displayType:"text",thousandSeparator:!0,prefix:"$"}),r.a.createElement(c.a,{className:"float-right",onClick:function(){var t=a.date_record,n=a.date_update,r=O.reduce((function(e,t){return e+t.total}),0),l=O.reduce((function(e,t){return e+t.util}),0),o=null;null!==g&&(o=g.user.id);var c={user:o,total:r,date_record:pe(t).format("YYYY-MM-DDTHH:mm"),date_update:pe(n).format("YYYY-MM-DDTHH:mm")},u=[{ref:(new Date).toLocaleString(),total:r}],i={invoice:c,sale:{ref:a.ref,util:parseFloat(l)},details:O,payments:u};e.addSale(i)}},"REGISTRAR")),r.a.createElement(s.a.Body,null,r.a.createElement(m.a,{onSubmit:function(e){e.preventDefault();var t={product:C.id,amount:parseFloat(a.amount),total:parseFloat(a.total),ref:C.ref,name:C.name,util:a.is_iva?0:parseFloat(a.total)-C.price_cost*parseFloat(a.amount),is_sale:!0,is_consumption:a.is_iva,is_promo:a.is_promo};w(O.concat(t))}},r.a.createElement(d.a,null,r.a.createElement(p.a,{md:4,lg:4},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Cliente"),r.a.createElement(f.a,{id:"combo-box-demo",options:P,getOptionLabel:function(e){return e.user.personal_id},onChange:function(e,t){console.log(t),h(t)},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.user.personal_id," ",e.user.username)))},renderInput:function(e){return r.a.createElement(v.a,ce({},e,{label:"Combo box",name:"client",variant:"outlined"}))}}))),r.a.createElement(p.a,{xs:6,md:4,lg:4},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"No. Factura"),r.a.createElement(m.a.Control,{type:"text",placeholder:"Referencia",value:a.ref,onChange:k,name:"ref"}))),r.a.createElement(p.a,{xs:6,md:4,lg:4},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Fecha"),r.a.createElement(Z.a,{dateFormat:"dd/MM/yyyy",showYearDropdown:!0,yearDropdownItemNumber:15,scrollableYearDropdown:!0,selected:a.date_record,onChange:function(e){i(ie(ie({},a),{},{date_record:e}))}})))),r.a.createElement("hr",null),r.a.createElement(d.a,null,r.a.createElement(p.a,{md:4,lg:4},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Producto"),r.a.createElement(f.a,{id:"combo-box-demo",options:_,getOptionLabel:function(e){return e.name},onChange:function(e,t){x(t),i(ie(ie({},a),{},{total:a.amount*t.price_sale}))},style:{width:300},renderOption:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"w-100"},r.a.createElement("span",null,e.name)))},renderInput:function(e){return r.a.createElement(v.a,ce({},e,{label:"Combo box",name:"product",variant:"outlined"}))}}))),r.a.createElement(p.a,{xs:5,md:2,lg:2},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Cantidad"),r.a.createElement(m.a.Control,{type:"number",placeholder:"Ej. 12",name:"amount",value:a.amount,onFocus:D,onChange:function(e){var t=e.target.value;t&&(console.log(t),i(ie(ie({},a),{},{amount:t,total:t*C.price_sale})))}}))),r.a.createElement(p.a,{xs:7,md:2,lg:2},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"Valor"),r.a.createElement(m.a.Control,{type:"number",placeholder:"Ej. 2000",name:"total",value:a.total,onFocus:D,onChange:k}))),r.a.createElement(p.a,{xs:6,md:1,lg:1},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"¿Gasto?"),r.a.createElement(m.a.Control,{type:"checkbox",name:"is_iva",checked:a.is_iva,onChange:k}))),r.a.createElement(p.a,{xs:6,md:1,lg:1},r.a.createElement(m.a.Group,null,r.a.createElement(m.a.Label,null,"¿Promo?"),r.a.createElement(m.a.Control,{type:"checkbox",name:"is_promo",checked:a.is_promo,onChange:k}))),r.a.createElement(p.a,{md:1,lg:1,className:"align-self-end"},r.a.createElement(m.a.Group,null,r.a.createElement(c.a,{className:"w-100",type:"submit"},"+"))))))),r.a.createElement("span",{className:"h5"},"Detalles"),r.a.createElement(E.a,{className:"mt-3 mb-2",data:O,columns:A,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}))})),be=a(13),ye=a(587),ve=a(112);var Ee=Object(_.b)((function(e){return{details:e.invoice.details}}),{})((function(e){var t=e.buy,a=e.details.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.product.name),r.a.createElement("td",null,e.amount),r.a.createElement("td",null,r.a.createElement(y.a,{value:e.total,displayType:"text",thousandSeparator:!0,prefix:"$"})))}));return r.a.createElement(g.a,{show:e.show,onHide:e.onClose},r.a.createElement(g.a.Header,{closeButton:!0},r.a.createElement(g.a.Title,null,null!==t?t.ref:"")),r.a.createElement(g.a.Body,null,r.a.createElement("div",null,r.a.createElement("span",null,null!==t&&null!==t.invoice.user?t.invoice.user.username:"N/A")," ",r.a.createElement("span",null,null!==t?ve(t.invoice.date_record).format("YYYY-MM-DD hh:mm A"):""),r.a.createElement("br",null),r.a.createElement("span",null,"Total venta: "),r.a.createElement(y.a,{value:null!==t?t.invoice.total:0,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(ye.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,style:{maxHeight:300}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Producto"),r.a.createElement("th",null,"Cantidad"),r.a.createElement("th",null,"Total"))),r.a.createElement("tbody",null,a))),r.a.createElement(g.a.Footer,null,r.a.createElement(c.a,{variant:"secondary",onClick:e.onClose},"Cerrar")))}));function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return he(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var je=a(112);var Oe=Object(_.b)((function(e){return{buys:e.invoice.buys,details:e.invoice.details}}),{getBuys:function(e){return function(t){O.a.get("/api/buy/".concat(e)).then((function(e){t({type:w.h,payload:e.data.buys})})).catch((function(e){return console.log(e)}))}},getDetails:K})((function(e){var t=ge(Object(n.useState)(!1),2),a=t[0],l=t[1],o=ge(Object(n.useState)(new Date),2),c=o[0],i=o[1],s=ge(Object(n.useState)(null),2),m=s[0],d=s[1],p=function(t){e.getDetails(t.invoice.id),d(t),l(!0)};Object(n.useEffect)((function(){e.getBuys(je(c).format("YYYY-MM-DD"))}),[c]),Object(n.useEffect)((function(){console.log("llamando"),e.getBuys("today")}),[]);var f=e.buys,b=f.reduce((function(e,t){return e+t.invoice.total}),0),v=[{Header:"REF",accessor:"ref",Cell:function(e){return r.a.createElement("span",{style:{textDecoration:"underline blue",color:"blue"},onClick:function(){p(e.original)}},e.original.ref,e.original.id)},width:100},{id:"name",Header:"Proveedor",accessor:function(e){return null!==e.invoice.user?e.invoice.user.username:"N/A"},width:150},{Header:"Fecha",accesor:"date_record",Cell:function(e){return r.a.createElement("span",null,je(e.original.invoice.date_record).format("YYYY-MM-DD hh:mm A"))}},{Header:"Total",accessor:"total",Cell:function(e){return r.a.createElement(y.a,{value:e.original.invoice.total,displayType:"text",thousandSeparator:!0,prefix:"$"})}}];return r.a.createElement(u.a,{className:"pt-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("span",{className:"h5"},"Compras del día:","  ",r.a.createElement(y.a,{value:b,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(be.b,{className:"float-right link-button",to:"/compras/add"},"AGREGAR"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Z.a,{dateFormat:"dd/MM/yyyy",showYearDropdown:!0,yearDropdownItemNumber:15,scrollableYearDropdown:!0,selected:c,onChangeRaw:function(e){e.preventDefault()},onChange:function(e){!function(e){i(e)}(e)}}))),r.a.createElement(E.a,{className:"mt-3 mb-2",data:f,columns:v,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}),r.a.createElement(Ee,{show:a,buy:m,onClose:function(){l(!1)}}))})),we=a(7),Se=a(112);var Ce=Object(_.b)((function(e){return{details:e.invoice.details}}),{})((function(e){var t=e.sale,a=e.details.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.product.name),r.a.createElement("td",null,e.amount),r.a.createElement("td",null,r.a.createElement(y.a,{value:e.total,displayType:"text",thousandSeparator:!0,prefix:"$"})))}));return r.a.createElement(g.a,{show:e.show,onHide:e.onClose},r.a.createElement(g.a.Header,{closeButton:!0},r.a.createElement(g.a.Title,null,null!==t?t.ref:"")),r.a.createElement(g.a.Body,{className:"modal-table"},r.a.createElement("div",null,r.a.createElement("span",null,null!==t&&null!==t.invoice.user?t.invoice.user.username:"N/A")," ",r.a.createElement("span",null,null!==t?Se(t.invoice.date_record).format("YYYY-MM-DD hh:mm A"):""),r.a.createElement("br",null),r.a.createElement("span",null,"Total venta: "),r.a.createElement(y.a,{value:null!==t?t.invoice.total:0,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(ye.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Producto"),r.a.createElement("th",null,"Cantidad"),r.a.createElement("th",null,"Total"))),r.a.createElement("tbody",null,a))),r.a.createElement(g.a.Footer,null,r.a.createElement(c.a,{variant:"secondary",onClick:e.onClose},"Cerrar")))}));function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var _e=a(112);var Pe=Object(_.b)((function(e){return{sales:e.invoice.sales,details:e.invoice.details}}),{getSales:q,resetSales:J,getDetails:K})((function(e){var t=function(e){var t=xe(Object(n.useState)(!1),2),a=t[0],r=t[1];function l(t){t.key===e&&r(!0)}var o=function(t){t.key===e&&r(!1)};return Object(n.useEffect)((function(){return window.addEventListener("keydown",l),window.addEventListener("keyup",o),function(){console.log("moriii perras"),window.removeEventListener("keydown",l),window.removeEventListener("keyup",o)}}),[]),a}("x"),a=Object(we.g)(),l=xe(Object(n.useState)(new Date),2),o=l[0],c=l[1],i=xe(Object(n.useState)(null),2),s=i[0],m=i[1],d=xe(Object(n.useState)(!1),2),p=d[0],f=d[1],b=function(t){e.getDetails(t.invoice.id),m(t),f(!0)};Object(n.useEffect)((function(){t&&a.push("/ventas/add")}),[t]),Object(n.useEffect)((function(){e.getSales(_e(o).format("YYYY-MM-DD"))}),[o]),Object(n.useEffect)((function(){return e.getSales("today"),function(){e.resetSales()}}),[v]);var v=e.sales,g=v.reduce((function(e,t){return e+t.invoice.total}),0),h=[{Header:"REF",accessor:"ref",Cell:function(e){return r.a.createElement("span",{style:{textDecoration:"underline blue",color:"blue"},onClick:function(){b(e.original)}},e.original.ref,e.original.id)},width:100},{id:"name",Header:"Cliente",accessor:function(e){return null!==e.invoice.user?e.invoice.user.username:"N/A"},width:150},{Header:"Fecha",accesor:"date_record",Cell:function(e){return r.a.createElement("span",null,_e(e.original.invoice.date_record).format("YYYY-MM-DD hh:mm A"))}},{Header:"Total",accessor:"total",Cell:function(e){return r.a.createElement(y.a,{value:e.original.invoice.total,displayType:"text",thousandSeparator:!0,prefix:"$"})}}];return r.a.createElement(u.a,{className:"pt-4"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("span",{className:"h5"},"Ventas del día:","  ",r.a.createElement(y.a,{value:g,displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement(be.b,{className:"float-right link-button",to:"/ventas/add"},"AGREGAR"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Z.a,{dateFormat:"dd/MM/yyyy",showYearDropdown:!0,yearDropdownItemNumber:15,scrollableYearDropdown:!0,selected:o,onChangeRaw:function(e){e.preventDefault()},onChange:function(e){!function(e){c(e)}(e)}}))),r.a.createElement(E.a,{className:"mt-3 mb-2",data:v,columns:h,defaultPageSize:5,previousText:"Atras",nextText:"Siguiente",pageText:"Página",ofText:"de",rowsText:"filas"}),r.a.createElement(Ce,{show:p,sale:s,onClose:function(){f(!1)}}))})),De=a(442);function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,l=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ne=a(112);var Ie=Object(_.b)((function(e){return{sales:e.invoice.sales,statitics:e.invoice.statitics}}),{getSales:q,getStatitics:function(e){return function(t){O.a.get("/api/sale/category/".concat(e)).then((function(e){console.log(e.data),t({type:w.q,payload:e.data.sales})})).catch((function(e){return console.log(e)}))}},resetSales:J})((function(e){var t=Te(Object(n.useState)(0),2),a=t[0],l=t[1];Object(n.useEffect)((function(){switch(parseInt(a)){case 0:case 1:e.getSales("last_week");break;case 2:e.getSales("last_month");break;case 3:e.getSales("last_4week");break;case 4:e.getStatitics("last_month");break;case 5:e.getStatitics("last_2week");break;case 6:e.getStatitics("last_week");break;case 7:e.getStatitics("today")}}),[a]),Object(n.useEffect)((function(){return e.getSales("last_week"),function(){e.resetSales()}}),[]);var o=e.sales,c=e.statitics;o=o.sort((function(e,t){return t.date>e.date?-1:e.date>t.date?1:0}));var i=a<4?0:1,s=a<4?o:c,f=s.map((function(e){return"rgba(".concat(255*Math.random()+0,", ").concat(255*Math.random()+0,", ").concat(255*Math.random()+0,", 0.5)")})),b=0==i?{labels:s.map((function(e){return Ne(e.date).locale("es").format("ddd DD")+"-"+(e.util/e.total*100).toFixed(0)+"%"})),datasets:[{label:"Ventas",data:e.sales.map((function(e){return e.total})),backgroundColor:"rgba(144, 223, 144, 0.5)",lineTension:.15},{label:"Ganancia",data:e.sales.map((function(e){return e.util})),backgroundColor:"rgba(255, 99, 71, 0.5)",lineTension:.15}]}:{labels:s.map((function(e){return e.product__category__name})),datasets:[{label:"Ventas",data:s.map((function(e){return e.total})),backgroundColor:f},{label:"Ganancia",data:s.map((function(e){return parseInt(e.util)})),backgroundColor:f}],borderWidth:1},v=0===i?{responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}:{responsive:!0},E=s.reduce((function(e,t){return e+t.total}),0),g=s.reduce((function(e,t){return e+t.util}),0);return r.a.createElement(u.a,{className:"pt-2"},r.a.createElement(d.a,null,r.a.createElement(p.a,null,r.a.createElement("span",null,"Total:",r.a.createElement(y.a,{value:E.toFixed(0),displayType:"text",thousandSeparator:!0,prefix:"$"})),r.a.createElement("br",null),r.a.createElement("span",null,"Utilidad:",r.a.createElement(y.a,{value:g.toFixed(0),displayType:"text",thousandSeparator:!0,prefix:"$"}))),r.a.createElement(p.a,null,r.a.createElement(m.a.Control,{as:"select",name:"filter",value:a,onChange:function(e){l(e.target.value)}},r.a.createElement("option",{value:1},"Ultimos 7 días"),r.a.createElement("option",{value:2},"Ultimos 30 días"),r.a.createElement("option",{value:3},"Ultimas 4 semanas"),r.a.createElement("option",{value:4},"Por categorias último 30 días"),r.a.createElement("option",{value:5},"Por categorias último 15 días"),r.a.createElement("option",{value:6},"Por categorias último 7 días"),r.a.createElement("option",{value:7},"Por categorias actual")))),0===i?r.a.createElement(De.Line,{data:b,options:v}):r.a.createElement(De.Polar,{data:b,options:v}))}));t.default=Object(_.b)((function(e){return{}}),{resetSales:J})((function(e){switch(Object(we.h)().pathname){case"/":case"/home":return console.log("renderizando putos 1"),r.a.createElement(Ie,null);case"/ventas":return e.resetSales(),r.a.createElement(Pe,null);case"/compras":return console.log("renderizando putos 3"),r.a.createElement(Oe,null);case"/inventario":return r.a.createElement(V,null);case"/ventas/add":return r.a.createElement(fe,null);case"/compras/add":return r.a.createElement(oe,null);default:return r.a.createElement(r.a.Fragment,null)}}))}}]);